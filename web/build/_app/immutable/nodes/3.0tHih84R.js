import{s as Je,n as Ue,r as We,e as xe,f as Qe,h as pt,o as lt,b as Xe,i as dl,j as yl}from"../chunks/scheduler.wSyt1s76.js";import{S as Ze,i as qe,g as _,y as Le,s as P,m as se,h as p,j as w,z as Oe,f as u,c as B,n as re,A as ge,k as a,a as x,x as i,B as de,o as _e,C as Ge,e as tt,l as mt,D as Ce,E as et,d as we,p as nt,b as st,t as ke,F as vt,r as je,u as Pe,v as Be,w as Ae,G as _l}from"../chunks/index.qhle_59H.js";import{e as De}from"../chunks/each.-oqiv04n.js";import{c as Tl,g as El}from"../chunks/_commonjsHelpers.5-cIlDoe.js";import{a as rt,b as Dl,$ as Mt}from"../chunks/runtime.nNr1oq3j.js";var pl={exports:{}};(function(t,e){(function(l,n){t.exports=n()})(Tl,function(){var l=1e3,n=6e4,r=36e5,s="millisecond",o="second",c="minute",h="hour",d="day",b="week",g="month",D="quarter",m="year",E="date",A="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,C=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,U={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(v){var T=["th","st","nd","rd"],k=v%100;return"["+v+(T[(k-20)%10]||T[k]||T[0])+"]"}},z=function(v,T,k){var y=String(v);return!y||y.length>=T?v:""+Array(T+1-y.length).join(k)+v},J={s:z,z:function(v){var T=-v.utcOffset(),k=Math.abs(T),y=Math.floor(k/60),H=k%60;return(T<=0?"+":"-")+z(y,2,"0")+":"+z(H,2,"0")},m:function v(T,k){if(T.date()<k.date())return-v(k,T);var y=12*(k.year()-T.year())+(k.month()-T.month()),H=T.clone().add(y,g),S=k-H<0,M=T.clone().add(y+(S?-1:1),g);return+(-(y+(k-H)/(S?H-M:M-H))||0)},a:function(v){return v<0?Math.ceil(v)||0:Math.floor(v)},p:function(v){return{M:g,y:m,w:b,d,D:E,h,m:c,s:o,ms:s,Q:D}[v]||String(v||"").toLowerCase().replace(/s$/,"")},u:function(v){return v===void 0}},V="en",I={};I[V]=U;var Y="$isDayjsObject",R=function(v){return v instanceof oe||!(!v||!v[Y])},G=function v(T,k,y){var H;if(!T)return V;if(typeof T=="string"){var S=T.toLowerCase();I[S]&&(H=S),k&&(I[S]=k,H=S);var M=T.split("-");if(!H&&M.length>1)return v(M[0])}else{var f=T.name;I[f]=T,H=f}return!y&&H&&(V=H),H||!y&&V},F=function(v,T){if(R(v))return v.clone();var k=typeof T=="object"?T:{};return k.date=v,k.args=arguments,new oe(k)},j=J;j.l=G,j.i=R,j.w=function(v,T){return F(v,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var oe=function(){function v(k){this.$L=G(k.locale,null,!0),this.parse(k),this.$x=this.$x||k.x||{},this[Y]=!0}var T=v.prototype;return T.parse=function(k){this.$d=function(y){var H=y.date,S=y.utc;if(H===null)return new Date(NaN);if(j.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var M=H.match($);if(M){var f=M[2]-1||0,N=(M[7]||"0").substring(0,3);return S?new Date(Date.UTC(M[1],f,M[3]||1,M[4]||0,M[5]||0,M[6]||0,N)):new Date(M[1],f,M[3]||1,M[4]||0,M[5]||0,M[6]||0,N)}}return new Date(H)}(k),this.init()},T.init=function(){var k=this.$d;this.$y=k.getFullYear(),this.$M=k.getMonth(),this.$D=k.getDate(),this.$W=k.getDay(),this.$H=k.getHours(),this.$m=k.getMinutes(),this.$s=k.getSeconds(),this.$ms=k.getMilliseconds()},T.$utils=function(){return j},T.isValid=function(){return this.$d.toString()!==A},T.isSame=function(k,y){var H=F(k);return this.startOf(y)<=H&&H<=this.endOf(y)},T.isAfter=function(k,y){return F(k)<this.startOf(y)},T.isBefore=function(k,y){return this.endOf(y)<F(k)},T.$g=function(k,y,H){return j.u(k)?this[y]:this.set(H,k)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(k,y){var H=this,S=!!j.u(y)||y,M=j.p(k),f=function(Z,ie){var le=j.w(H.$u?Date.UTC(H.$y,ie,Z):new Date(H.$y,ie,Z),H);return S?le:le.endOf(d)},N=function(Z,ie){return j.w(H.toDate()[Z].apply(H.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(ie)),H)},W=this.$W,Q=this.$M,te=this.$D,ae="set"+(this.$u?"UTC":"");switch(M){case m:return S?f(1,0):f(31,11);case g:return S?f(1,Q):f(0,Q+1);case b:var ve=this.$locale().weekStart||0,L=(W<ve?W+7:W)-ve;return f(S?te-L:te+(6-L),Q);case d:case E:return N(ae+"Hours",0);case h:return N(ae+"Minutes",1);case c:return N(ae+"Seconds",2);case o:return N(ae+"Milliseconds",3);default:return this.clone()}},T.endOf=function(k){return this.startOf(k,!1)},T.$set=function(k,y){var H,S=j.p(k),M="set"+(this.$u?"UTC":""),f=(H={},H[d]=M+"Date",H[E]=M+"Date",H[g]=M+"Month",H[m]=M+"FullYear",H[h]=M+"Hours",H[c]=M+"Minutes",H[o]=M+"Seconds",H[s]=M+"Milliseconds",H)[S],N=S===d?this.$D+(y-this.$W):y;if(S===g||S===m){var W=this.clone().set(E,1);W.$d[f](N),W.init(),this.$d=W.set(E,Math.min(this.$D,W.daysInMonth())).$d}else f&&this.$d[f](N);return this.init(),this},T.set=function(k,y){return this.clone().$set(k,y)},T.get=function(k){return this[j.p(k)]()},T.add=function(k,y){var H,S=this;k=Number(k);var M=j.p(y),f=function(Q){var te=F(S);return j.w(te.date(te.date()+Math.round(Q*k)),S)};if(M===g)return this.set(g,this.$M+k);if(M===m)return this.set(m,this.$y+k);if(M===d)return f(1);if(M===b)return f(7);var N=(H={},H[c]=n,H[h]=r,H[o]=l,H)[M]||1,W=this.$d.getTime()+k*N;return j.w(W,this)},T.subtract=function(k,y){return this.add(-1*k,y)},T.format=function(k){var y=this,H=this.$locale();if(!this.isValid())return H.invalidDate||A;var S=k||"YYYY-MM-DDTHH:mm:ssZ",M=j.z(this),f=this.$H,N=this.$m,W=this.$M,Q=H.weekdays,te=H.months,ae=H.meridiem,ve=function(ie,le,pe,Ee){return ie&&(ie[le]||ie(y,S))||pe[le].slice(0,Ee)},L=function(ie){return j.s(f%12||12,ie,"0")},Z=ae||function(ie,le,pe){var Ee=ie<12?"AM":"PM";return pe?Ee.toLowerCase():Ee};return S.replace(C,function(ie,le){return le||function(pe){switch(pe){case"YY":return String(y.$y).slice(-2);case"YYYY":return j.s(y.$y,4,"0");case"M":return W+1;case"MM":return j.s(W+1,2,"0");case"MMM":return ve(H.monthsShort,W,te,3);case"MMMM":return ve(te,W);case"D":return y.$D;case"DD":return j.s(y.$D,2,"0");case"d":return String(y.$W);case"dd":return ve(H.weekdaysMin,y.$W,Q,2);case"ddd":return ve(H.weekdaysShort,y.$W,Q,3);case"dddd":return Q[y.$W];case"H":return String(f);case"HH":return j.s(f,2,"0");case"h":return L(1);case"hh":return L(2);case"a":return Z(f,N,!0);case"A":return Z(f,N,!1);case"m":return String(N);case"mm":return j.s(N,2,"0");case"s":return String(y.$s);case"ss":return j.s(y.$s,2,"0");case"SSS":return j.s(y.$ms,3,"0");case"Z":return M}return null}(ie)||M.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(k,y,H){var S,M=this,f=j.p(y),N=F(k),W=(N.utcOffset()-this.utcOffset())*n,Q=this-N,te=function(){return j.m(M,N)};switch(f){case m:S=te()/12;break;case g:S=te();break;case D:S=te()/3;break;case b:S=(Q-W)/6048e5;break;case d:S=(Q-W)/864e5;break;case h:S=Q/r;break;case c:S=Q/n;break;case o:S=Q/l;break;default:S=Q}return H?S:j.a(S)},T.daysInMonth=function(){return this.endOf(g).$D},T.$locale=function(){return I[this.$L]},T.locale=function(k,y){if(!k)return this.$L;var H=this.clone(),S=G(k,y,!0);return S&&(H.$L=S),H},T.clone=function(){return j.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},v}(),ee=oe.prototype;return F.prototype=ee,[["$ms",s],["$s",o],["$m",c],["$H",h],["$W",d],["$M",g],["$y",m],["$D",E]].forEach(function(v){ee[v[1]]=function(T){return this.$g(T,v[0],v[1])}}),F.extend=function(v,T){return v.$i||(v(T,oe,F),v.$i=!0),F},F.locale=G,F.isDayjs=R,F.unix=function(v){return F(1e3*v)},F.en=I[V],F.Ls=I,F.p={},F})})(pl);var Cl=pl.exports;const ft=El(Cl),St=["png","webp","jpeg","jpg","gif"],Ut=["mp4","webm","mov","avi","mkv"],Ml=["json"],bt=["html","image","video","json","dir"],ml="comfyui-browser";function dt(t,e,l){return l.folder_path?`${t}/browser/s/${e}/${l.folder_path}/${l.name}`:`${t}/browser/s/${e}/${l.name}`}function It(t,e,l){let n=t.split(".");return n.pop(),n=n.join("."),l.find(r=>{const s=r.name.split("."),o=s.pop().toLowerCase();return s.join(".")===n&&e.includes(o)})}function Sl(t,e,l,n){const r=t.name.split(".").pop().toLowerCase();if(bt.includes(r)&&(t.fileType=r,r==="json"&&It(t.name,St.concat(Ut),n))||(St.includes(r)&&(t.fileType="image"),Ut.includes(r)&&(t.fileType="video"),!t.fileType))return;if(t.url=dt(l,e,t),["image","video"].includes(t.fileType)){t.previewUrl=dt(l,e,t);let o=It(t.name,Ml,n);o&&(t.url=dt(l,e,o))}const s=ft.unix(t.created_at);return t.formattedDatetime=s.format("YYYY-MM-DD HH:mm:ss"),t.formattedSize=gt(t.bytes),t}function Ul(t){t.fileType="dir";const e=t.folder_path?`${t.folder_path}/${t.name}`:t.name;t.path=e;const l=ft.unix(t.created_at);return t.formattedDatetime=l.format("YYYY-MM-DD HH-mm-ss"),t.formattedSize="0 KB",t}async function wt(t,e,l){let n=e+"/browser/files?folder_type="+t;l&&(n=n+`&folder_path=${l}&`);let o=(await(await fetch(n)).json()).files,c=[];return o.forEach(h=>{let d;h.type==="dir"?d=Ul(h):d=Sl(h,t,e,o),d&&c.push(d)}),c}function vl(t,e){if(t>=e)return t;const l=document.documentElement.scrollHeight;return window.innerHeight+window.scrollY>=l?t+10:t}async function bl(t,e,l){const n=await fetch(t.url),r=await n.blob(),s=new File([r],t.name,{type:n.headers.get("Content-Type")||""}),o=e.loadGraphData.bind(e);e.loadGraphData=async function(c){const h=window.top?.document.getElementById("comfy-browser-dialog");h&&(h.style.display="none"),await o(c)},await e.handleFile(s),l.show(!1,"Loaded","No workflow found here")}function wl(){let t=localStorage.getItem(ml),e={};return t&&(e=JSON.parse(t)),e}function Il(t,e){let l=wl();l[t]=e,localStorage.setItem(ml,JSON.stringify(l))}function gt(t){return t/1024/1024>1?(t/1024/1024).toFixed(2)+" MB":Math.round(t/1024)+" KB"}function Lt(t,e,l){const n=t.slice();return n[11]=e[l],n}function Ot(t){let e,l,n=Nt(t[11])+"",r,s,o,c,h;function d(){return t[10](t[11])}return{c(){e=_("li"),l=_("button"),r=se(n),o=P(),this.h()},l(b){e=p(b,"LI",{});var g=w(e);l=p(g,"BUTTON",{class:!0});var D=w(l);r=re(D,n),D.forEach(u),o=B(g),g.forEach(u),this.h()},h(){a(l,"class",s=t[11]==t[3]?"active":"")},m(b,g){x(b,e,g),i(e,l),i(l,r),i(e,o),c||(h=de(l,"click",d),c=!0)},p(b,g){t=b,g&4&&n!==(n=Nt(t[11])+"")&&_e(r,n),g&12&&s!==(s=t[11]==t[3]?"active":"")&&a(l,"class",s)},d(b){b&&u(e),c=!1,h()}}}function Ll(t){let e,l,n,r,s,o,c,h=t[1]("navbar.outputs")+"",d,b,g,D,m,E,A,$,C=t[1]("navbar.saves")+"",U,z,J,V,I,Y,R,G,F=t[1]("navbar.sources")+"",j,oe,ee,v,T,k,y,H,S=t[1]("navbar.models")+"",M,f,N,W,Q,te='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"></path></svg> <svg width="12px" height="12px" class="hidden h-2 w-2 fill-current opacity-60 sm:inline-block" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg>',ae,ve,L,Z,ie='<a href="https://github.com/talesofai/comfyui-browser" target="_blank"><img src="https://img.shields.io/github/stars/talesofai/comfyui-browser?style=social" alt="stars - comfyui-browser"/></a>',le,pe,Ee='<a href="https://discord.gg/f49R9dTKwM" target="_blank"><svg class="hidden h-6 w-6 fill-current opacity-60 sm:inline-block " viewBox="0 -28.5 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid"><path d="M216.856339,16.5966031 C200.285002,8.84328665 182.566144,3.2084988 164.041564,0 C161.766523,4.11318106 159.108624,9.64549908 157.276099,14.0464379 C137.583995,11.0849896 118.072967,11.0849896 98.7430163,14.0464379 C96.9108417,9.64549908 94.1925838,4.11318106 91.8971895,0 C73.3526068,3.2084988 55.6133949,8.86399117 39.0420583,16.6376612 C5.61752293,67.146514 -3.4433191,116.400813 1.08711069,164.955721 C23.2560196,181.510915 44.7403634,191.567697 65.8621325,198.148576 C71.0772151,190.971126 75.7283628,183.341335 79.7352139,175.300261 C72.104019,172.400575 64.7949724,168.822202 57.8887866,164.667963 C59.7209612,163.310589 61.5131304,161.891452 63.2445898,160.431257 C105.36741,180.133187 151.134928,180.133187 192.754523,160.431257 C194.506336,161.891452 196.298154,163.310589 198.110326,164.667963 C191.183787,168.842556 183.854737,172.420929 176.223542,175.320965 C180.230393,183.341335 184.861538,190.991831 190.096624,198.16893 C211.238746,191.588051 232.743023,181.531619 254.911949,164.955721 C260.227747,108.668201 245.831087,59.8662432 216.856339,16.5966031 Z M85.4738752,135.09489 C72.8290281,135.09489 62.4592217,123.290155 62.4592217,108.914901 C62.4592217,94.5396472 72.607595,82.7145587 85.4738752,82.7145587 C98.3405064,82.7145587 108.709962,94.5189427 108.488529,108.914901 C108.508531,123.290155 98.3405064,135.09489 85.4738752,135.09489 Z M170.525237,135.09489 C157.88039,135.09489 147.510584,123.290155 147.510584,108.914901 C147.510584,94.5396472 157.658606,82.7145587 170.525237,82.7145587 C183.391518,82.7145587 193.761324,94.5189427 193.539891,108.914901 C193.539891,123.290155 183.391518,135.09489 170.525237,135.09489 Z" fill="#5764f2" fill-rule="nonzero"></path></svg></a>',X,q,ue=De(t[2]),he=[];for(let me=0;me<ue.length;me+=1)he[me]=Ot(Lt(t,ue,me));return{c(){e=_("div"),l=_("ul"),n=_("li"),r=_("button"),s=Le("svg"),o=Le("path"),c=P(),d=se(h),g=P(),D=_("li"),m=_("button"),E=Le("svg"),A=Le("path"),$=P(),U=se(C),J=P(),V=_("li"),I=_("button"),Y=Le("svg"),R=Le("path"),G=P(),j=se(F),ee=P(),v=_("li"),T=_("button"),k=Le("svg"),y=Le("path"),H=P(),M=se(S),N=P(),W=_("div"),Q=_("div"),Q.innerHTML=te,ae=P(),ve=_("ul");for(let me=0;me<he.length;me+=1)he[me].c();L=P(),Z=_("div"),Z.innerHTML=ie,le=P(),pe=_("div"),pe.innerHTML=Ee,this.h()},l(me){e=p(me,"DIV",{class:!0});var ne=w(e);l=p(ne,"UL",{class:!0});var ce=w(l);n=p(ce,"LI",{});var Ie=w(n);r=p(Ie,"BUTTON",{class:!0});var be=w(r);s=Oe(be,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var Ke=w(s);o=Oe(Ke,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(o).forEach(u),Ke.forEach(u),c=B(be),d=re(be,h),be.forEach(u),Ie.forEach(u),g=B(ce),D=p(ce,"LI",{});var ze=w(D);m=p(ze,"BUTTON",{class:!0});var $e=w(m);E=Oe($e,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var Ne=w(E);A=Oe(Ne,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(A).forEach(u),Ne.forEach(u),$=B($e),U=re($e,C),$e.forEach(u),ze.forEach(u),J=B(ce),V=p(ce,"LI",{});var ye=w(V);I=p(ye,"BUTTON",{class:!0});var Te=w(I);Y=Oe(Te,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var He=w(Y);R=Oe(He,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(R).forEach(u),He.forEach(u),G=B(Te),j=re(Te,F),Te.forEach(u),ye.forEach(u),ee=B(ce),v=p(ce,"LI",{});var Me=w(v);T=p(Me,"BUTTON",{class:!0});var Ye=w(T);k=Oe(Ye,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var Se=w(k);y=Oe(Se,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(y).forEach(u),Se.forEach(u),H=B(Ye),M=re(Ye,S),Ye.forEach(u),Me.forEach(u),ce.forEach(u),N=B(ne),W=p(ne,"DIV",{class:!0});var O=w(W);Q=p(O,"DIV",{tabindex:!0,role:!0,class:!0,"data-svelte-h":!0}),ge(Q)!=="svelte-1uytjka"&&(Q.innerHTML=te),ae=B(O),ve=p(O,"UL",{class:!0});var fe=w(ve);for(let K=0;K<he.length;K+=1)he[K].l(fe);fe.forEach(u),O.forEach(u),L=B(ne),Z=p(ne,"DIV",{class:!0,"data-svelte-h":!0}),ge(Z)!=="svelte-104clx6"&&(Z.innerHTML=ie),le=B(ne),pe=p(ne,"DIV",{class:!0,"data-svelte-h":!0}),ge(pe)!=="svelte-11410qh"&&(pe.innerHTML=Ee),ne.forEach(u),this.h()},h(){a(o,"stroke-linecap","round"),a(o,"stroke-linejoin","round"),a(o,"d","M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"),a(s,"xmlns","http://www.w3.org/2000/svg"),a(s,"fill","none"),a(s,"viewBox","0 0 24 24"),a(s,"stroke-width","1.5"),a(s,"stroke","currentColor"),a(s,"class","w-5 h-5"),a(r,"class",b=t[0]("outputs")),a(A,"stroke-linecap","round"),a(A,"stroke-linejoin","round"),a(A,"d","M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"),a(E,"xmlns","http://www.w3.org/2000/svg"),a(E,"fill","none"),a(E,"viewBox","0 0 24 24"),a(E,"stroke-width","1.5"),a(E,"stroke","currentColor"),a(E,"class","w-5 h-5"),a(m,"class",z=t[0]("collections")),a(R,"stroke-linecap","round"),a(R,"stroke-linejoin","round"),a(R,"d","M12.75 19.5v-.75a7.5 7.5 0 00-7.5-7.5H4.5m0-6.75h.75c7.87 0 14.25 6.38 14.25 14.25v.75M6 18.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"),a(Y,"xmlns","http://www.w3.org/2000/svg"),a(Y,"fill","none"),a(Y,"viewBox","0 0 24 24"),a(Y,"stroke-width","1.5"),a(Y,"stroke","currentColor"),a(Y,"class","w-5 h-5"),a(I,"class",oe=t[0]("sources")),a(y,"stroke-linecap","round"),a(y,"stroke-linejoin","round"),a(y,"d","m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"),a(k,"xmlns","http://www.w3.org/2000/svg"),a(k,"fill","none"),a(k,"viewBox","0 0 24 24"),a(k,"stroke-width","1.5"),a(k,"stroke","currentColor"),a(k,"class","w-5 h-5"),a(T,"class",f=t[0]("models")),a(l,"class","menu menu-horizontal bg-base-200 rounded-box flex-1"),a(Q,"tabindex","0"),a(Q,"role","button"),a(Q,"class","m-1 btn btn-ghost"),a(ve,"class","p-2 shadow menu dropdown-content z-[1] bg-base-100 rounded-box w-24"),a(W,"class","dropdown dropdown-hover"),a(Z,"class","hidden sm:flex flex-0 items-center justify-center p-2"),a(pe,"class","hidden sm:flex flex-0 items-center justify-center p-2"),a(e,"class","flex")},m(me,ne){x(me,e,ne),i(e,l),i(l,n),i(n,r),i(r,s),i(s,o),i(r,c),i(r,d),i(l,g),i(l,D),i(D,m),i(m,E),i(E,A),i(m,$),i(m,U),i(l,J),i(l,V),i(V,I),i(I,Y),i(Y,R),i(I,G),i(I,j),i(l,ee),i(l,v),i(v,T),i(T,k),i(k,y),i(T,H),i(T,M),i(e,N),i(e,W),i(W,Q),i(W,ae),i(W,ve);for(let ce=0;ce<he.length;ce+=1)he[ce]&&he[ce].m(ve,null);i(e,L),i(e,Z),i(e,le),i(e,pe),X||(q=[de(r,"click",t[6]),de(m,"click",t[7]),de(I,"click",t[8]),de(T,"click",t[9])],X=!0)},p(me,[ne]){if(ne&2&&h!==(h=me[1]("navbar.outputs")+"")&&_e(d,h),ne&1&&b!==(b=me[0]("outputs"))&&a(r,"class",b),ne&2&&C!==(C=me[1]("navbar.saves")+"")&&_e(U,C),ne&1&&z!==(z=me[0]("collections"))&&a(m,"class",z),ne&2&&F!==(F=me[1]("navbar.sources")+"")&&_e(j,F),ne&1&&oe!==(oe=me[0]("sources"))&&a(I,"class",oe),ne&2&&S!==(S=me[1]("navbar.models")+"")&&_e(M,S),ne&1&&f!==(f=me[0]("models"))&&a(T,"class",f),ne&12){ue=De(me[2]);let ce;for(ce=0;ce<ue.length;ce+=1){const Ie=Lt(me,ue,ce);he[ce]?he[ce].p(Ie,ne):(he[ce]=Ot(Ie),he[ce].c(),he[ce].m(ve,null))}for(;ce<he.length;ce+=1)he[ce].d(1);he.length=ue.length}},i:Ue,o:Ue,d(me){me&&u(e),Ge(he,me),X=!1,We(q)}}}function Nt(t){switch(t){case"en-US":return"En";case"zh-CN":return"中文";default:return"En"}}function Ol(t,e,l){let n,r,s,o;xe(t,rt,E=>l(1,r=E)),xe(t,Dl,E=>l(2,s=E)),xe(t,Mt,E=>l(3,o=E));let{activeTab:c="outputs"}=e;async function h(E){l(5,c=E),Il("lastTab",E)}const d=()=>h("outputs"),b=()=>h("collections"),g=()=>h("sources"),D=()=>h("models"),m=E=>Mt.set(E);return t.$$set=E=>{"activeTab"in E&&l(5,c=E.activeTab)},t.$$.update=()=>{t.$$.dirty&32&&l(0,n=function(E){return E===c?"active":""})},[n,r,s,o,h,c,d,b,g,D,m]}class Nl extends Ze{constructor(e){super(),qe(this,e,Ol,Ll,Je,{activeTab:5})}}function Ht(t){let e,l,n,r,s;return{c(){e=_("div"),l=_("div"),n=_("span"),r=se(t[2]),this.h()},l(o){e=p(o,"DIV",{class:!0});var c=w(e);l=p(c,"DIV",{class:!0});var h=w(l);n=p(h,"SPAN",{});var d=w(n);r=re(d,t[2]),d.forEach(u),h.forEach(u),c.forEach(u),this.h()},h(){a(l,"class",s="alert "+(t[1]?"alert-success":"alert-error")),a(e,"class","toast toast-center")},m(o,c){x(o,e,c),i(e,l),i(l,n),i(n,r)},p(o,c){c&4&&_e(r,o[2]),c&2&&s!==(s="alert "+(o[1]?"alert-success":"alert-error"))&&a(l,"class",s)},d(o){o&&u(e)}}}function Hl(t){let e,l=t[0]&&Ht(t);return{c(){l&&l.c(),e=tt()},l(n){l&&l.l(n),e=tt()},m(n,r){l&&l.m(n,r),x(n,e,r)},p(n,[r]){n[0]?l?l.p(n,r):(l=Ht(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},i:Ue,o:Ue,d(n){n&&u(e),l&&l.d(n)}}}function Vl(t,e,l){let{showToast:n=!1}=e,{toastSuccess:r=!0}=e,{toastText:s=""}=e;function o(c,h,d,b=2e3){l(1,r=c),l(2,s=c?h:d),l(0,n=!0),setTimeout(()=>l(0,n=!1),b)}return t.$$set=c=>{"showToast"in c&&l(0,n=c.showToast),"toastSuccess"in c&&l(1,r=c.toastSuccess),"toastText"in c&&l(2,s=c.toastText)},[n,r,s,o]}class ht extends Ze{constructor(e){super(),qe(this,e,Vl,Hl,Je,{showToast:0,toastSuccess:1,toastText:2,show:3})}get show(){return this.$$.ctx[3]}}function jl(t){let e,l,n,r,s,o=t[0].fileType==="json"&&Vt(),c=t[0].fileType==="html"&&jt(),h=t[0].fileType==="image"&&Pt(t),d=t[0].fileType==="video"&&Bt(t);return{c(){e=_("a"),o&&o.c(),l=P(),c&&c.c(),n=P(),h&&h.c(),r=P(),d&&d.c(),this.h()},l(b){e=p(b,"A",{href:!0,target:!0,style:!0});var g=w(e);o&&o.l(g),l=B(g),c&&c.l(g),n=B(g),h&&h.l(g),r=B(g),d&&d.l(g),g.forEach(u),this.h()},h(){a(e,"href",s=t[0].url),a(e,"target","_blank"),mt(e,"height","inherit"),mt(e,"width","inherit")},m(b,g){x(b,e,g),o&&o.m(e,null),i(e,l),c&&c.m(e,null),i(e,n),h&&h.m(e,null),i(e,r),d&&d.m(e,null)},p(b,g){b[0].fileType==="json"?o||(o=Vt(),o.c(),o.m(e,l)):o&&(o.d(1),o=null),b[0].fileType==="html"?c||(c=jt(),c.c(),c.m(e,n)):c&&(c.d(1),c=null),b[0].fileType==="image"?h?h.p(b,g):(h=Pt(b),h.c(),h.m(e,r)):h&&(h.d(1),h=null),b[0].fileType==="video"?d?d.p(b,g):(d=Bt(b),d.c(),d.m(e,null)):d&&(d.d(1),d=null),g&1&&s!==(s=b[0].url)&&a(e,"href",s)},d(b){b&&u(e),o&&o.d(),c&&c.d(),h&&h.d(),d&&d.d()}}}function Pl(t){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"></path></svg>',n,r;return{c(){e=_("button"),e.innerHTML=l,this.h()},l(s){e=p(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-fq6lbl"&&(e.innerHTML=l),this.h()},h(){a(e,"class","w-full h-full flex items-center justify-center")},m(s,o){x(s,e,o),n||(r=de(e,"click",t[3]),n=!0)},p:Ue,d(s){s&&u(e),n=!1,r()}}}function Vt(t){let e,l='<span class="font-bold text-xl">JSON</span>';return{c(){e=_("div"),e.innerHTML=l,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-opd4jy"&&(e.innerHTML=l),this.h()},h(){a(e,"class","w-full h-full flex items-center justify-center")},m(n,r){x(n,e,r)},d(n){n&&u(e)}}}function jt(t){let e,l='<span class="font-bold text-xl">HTML</span>';return{c(){e=_("div"),e.innerHTML=l,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-axwnel"&&(e.innerHTML=l),this.h()},h(){a(e,"class","w-full h-full flex items-center justify-center")},m(n,r){x(n,e,r)},d(n){n&&u(e)}}}function Pt(t){let e,l,n;return{c(){e=_("img"),this.h()},l(r){e=p(r,"IMG",{class:!0,loading:!0,src:!0,alt:!0}),this.h()},h(){a(e,"class","h-full w-full object-contain"),a(e,"loading","lazy"),Qe(e.src,l=t[0].previewUrl)||a(e,"src",l),a(e,"alt",n=t[0].name)},m(r,s){x(r,e,s)},p(r,s){s&1&&!Qe(e.src,l=r[0].previewUrl)&&a(e,"src",l),s&1&&n!==(n=r[0].name)&&a(e,"alt",n)},d(r){r&&u(e)}}}function Bt(t){let e,l,n;return{c(){e=_("video"),l=_("track"),this.h()},l(r){e=p(r,"VIDEO",{class:!0,src:!0});var s=w(e);l=p(s,"TRACK",{kind:!0}),s.forEach(u),this.h()},h(){a(l,"kind","captions"),a(e,"class","h-full w-full object-contain pb-0.5 border-0.5 border-black"),Qe(e.src,n=t[0].previewUrl)||a(e,"src",n),e.loop=!0,e.autoplay=!0,e.muted=!0},m(r,s){x(r,e,s),i(e,l)},p(r,s){s&1&&!Qe(e.src,n=r[0].previewUrl)&&a(e,"src",n)},d(r){r&&u(e)}}}function Bl(t){let e;function l(s,o){return s[0].type==="dir"?Pl:jl}let n=l(t),r=n(t);return{c(){e=_("div"),r.c(),this.h()},l(s){e=p(s,"DIV",{class:!0});var o=w(e);r.l(o),o.forEach(u),this.h()},h(){a(e,"class",t[1])},m(s,o){x(s,e,o),r.m(e,null)},p(s,[o]){n===(n=l(s))&&r?r.p(s,o):(r.d(1),r=n(s),r&&(r.c(),r.m(e,null))),o&2&&a(e,"class",s[1])},i:Ue,o:Ue,d(s){s&&u(e),r.d()}}}function Al(t,e,l){let{file:n}=e,{styleClass:r}=e,{onClickDir:s}=e;const o=()=>s(n);return t.$$set=c=>{"file"in c&&l(0,n=c.file),"styleClass"in c&&l(1,r=c.styleClass),"onClickDir"in c&&l(2,s=c.onClickDir)},[n,r,s,o]}class gl extends Ze{constructor(e){super(),qe(this,e,Al,Bl,Je,{file:0,styleClass:1,onClickDir:2})}}function At(t,e,l){const n=t.slice();return n[47]=e[l],n}function $t(t,e,l){const n=t.slice();return n[50]=e[l],n}function Ft(t,e,l){const n=t.slice();return n[53]=e[l],n}function zt(t,e,l){const n=t.slice();return n[56]=e[l],n[58]=l,n}function Rt(t){let e,l,n=t[56]+"",r,s,o;function c(){return t[30](t[58])}return{c(){e=_("li"),l=_("button"),r=se(n)},l(h){e=p(h,"LI",{});var d=w(e);l=p(d,"BUTTON",{});var b=w(l);r=re(b,n),b.forEach(u),d.forEach(u)},m(h,d){x(h,e,d),i(e,l),i(l,r),s||(o=de(l,"click",c),s=!0)},p(h,d){t=h,d[0]&1&&n!==(n=t[56]+"")&&_e(r,n)},d(h){h&&u(e),s=!1,o()}}}function Yt(t){let e,l,n,r,s,o=t[53].name+"",c,h,d,b=t[53].formattedDatetime+"",g,D,m,E=t[53].formattedSize+"",A,$,C,U,z,J=t[7]("common.btn.save")+"",V,I,Y,R,G,F,j=t[7]("common.btn.delete")+"",oe,ee,v,T,k;n=new gl({props:{file:t[53],styleClass:"w-full h-16 sm:h-36",onClickDir:t[24]}});let y=t[8]&&t[53].type!="dir"&&Gt(t);function H(){return t[35](t[53])}function S(){return t[36](t[53])}return{c(){e=_("div"),l=_("div"),je(n.$$.fragment),r=P(),s=_("p"),c=se(o),h=P(),d=_("p"),g=se(b),D=P(),m=_("p"),A=se(E),$=P(),C=_("div"),y&&y.c(),U=P(),z=_("button"),V=se(J),I=P(),Y=_("button"),R=Le("svg"),G=Le("path"),F=P(),oe=se(j),ee=P(),this.h()},l(M){e=p(M,"DIV",{class:!0});var f=w(e);l=p(f,"DIV",{class:!0});var N=w(l);Pe(n.$$.fragment,N),N.forEach(u),r=B(f),s=p(f,"P",{class:!0});var W=w(s);c=re(W,o),W.forEach(u),h=B(f),d=p(f,"P",{class:!0});var Q=w(d);g=re(Q,b),Q.forEach(u),D=B(f),m=p(f,"P",{class:!0});var te=w(m);A=re(te,E),te.forEach(u),$=B(f),C=p(f,"DIV",{class:!0});var ae=w(C);y&&y.l(ae),U=B(ae),z=p(ae,"BUTTON",{class:!0});var ve=w(z);V=re(ve,J),ve.forEach(u),I=B(ae),Y=p(ae,"BUTTON",{class:!0});var L=w(Y);R=Oe(L,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var Z=w(R);G=Oe(Z,"path",{d:!0,fill:!0}),w(G).forEach(u),Z.forEach(u),F=B(L),oe=re(L,j),L.forEach(u),ae.forEach(u),ee=B(f),f.forEach(u),this.h()},h(){a(l,"class","flex items-center"),a(s,"class","font-bold max-h-12 leading-6 overflow-auto mt-1"),a(d,"class","hidden sm:block text-gray-500 text-xs"),a(m,"class","hidden sm:block text-gray-500 text-xs"),a(z,"class","btn btn-link btn-sm p-0 no-underline text-accent"),a(G,"d","M16 2v4h6v2h-2v14H4V8H2V6h6V2h8zm-2 2h-4v2h4V4zm0 4H6v12h12V8h-4zm-5 2h2v8H9v-8zm6 0h-2v8h2v-8z"),a(G,"fill","#f77"),a(R,"class","w-3 h-3"),a(R,"viewBox","0 0 24 24"),a(R,"fill","none"),a(R,"xmlns","http://www.w3.org/2000/svg"),a(Y,"class","btn btn-link btn-sm p-0 no-underline text-error float-right"),a(C,"class",""),a(e,"class","p-2 bg-info-content")},m(M,f){x(M,e,f),i(e,l),Be(n,l,null),i(e,r),i(e,s),i(s,c),i(e,h),i(e,d),i(d,g),i(e,D),i(e,m),i(m,A),i(e,$),i(e,C),y&&y.m(C,null),i(C,U),i(C,z),i(z,V),i(C,I),i(C,Y),i(Y,R),i(R,G),i(Y,F),i(Y,oe),i(e,ee),v=!0,T||(k=[de(z,"click",H),de(Y,"click",S)],T=!0)},p(M,f){t=M;const N={};f[0]&12800&&(N.file=t[53]),n.$set(N),(!v||f[0]&12800)&&o!==(o=t[53].name+"")&&_e(c,o),(!v||f[0]&12800)&&b!==(b=t[53].formattedDatetime+"")&&_e(g,b),(!v||f[0]&12800)&&E!==(E=t[53].formattedSize+"")&&_e(A,E),t[8]&&t[53].type!="dir"?y?y.p(t,f):(y=Gt(t),y.c(),y.m(C,U)):y&&(y.d(1),y=null),(!v||f[0]&128)&&J!==(J=t[7]("common.btn.save")+"")&&_e(V,J),(!v||f[0]&128)&&j!==(j=t[7]("common.btn.delete")+"")&&_e(oe,j)},i(M){v||(we(n.$$.fragment,M),v=!0)},o(M){ke(n.$$.fragment,M),v=!1},d(M){M&&u(e),Ae(n),y&&y.d(),T=!1,We(k)}}}function Gt(t){let e,l=t[7]("common.btn.load")+"",n,r,s,o=t[7]("common.btn.upload")+"",c,h,d;function b(){return t[33](t[53])}function g(){return t[34](t[53])}return{c(){e=_("button"),n=se(l),r=P(),s=_("button"),c=se(o),this.h()},l(D){e=p(D,"BUTTON",{class:!0});var m=w(e);n=re(m,l),m.forEach(u),r=B(D),s=p(D,"BUTTON",{class:!0});var E=w(s);c=re(E,o),E.forEach(u),this.h()},h(){a(e,"class","btn btn-link btn-sm p-0 no-underline text-accent"),a(s,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(D,m){x(D,e,m),i(e,n),x(D,r,m),x(D,s,m),i(s,c),h||(d=[de(e,"click",b),de(s,"click",g)],h=!0)},p(D,m){t=D,m[0]&128&&l!==(l=t[7]("common.btn.load")+"")&&_e(n,l),m[0]&128&&o!==(o=t[7]("common.btn.upload")+"")&&_e(c,o)},d(D){D&&(u(e),u(r),u(s)),h=!1,We(d)}}}function Jt(t){let e=bt.includes(t[53].fileType),l,n,r=e&&Yt(t);return{c(){r&&r.c(),l=tt()},l(s){r&&r.l(s),l=tt()},m(s,o){r&&r.m(s,o),x(s,l,o),n=!0},p(s,o){o[0]&12800&&(e=bt.includes(s[53].fileType)),e?r?(r.p(s,o),o[0]&12800&&we(r,1)):(r=Yt(s),r.c(),we(r,1),r.m(l.parentNode,l)):r&&(nt(),ke(r,1,1,()=>{r=null}),st())},i(s){n||(we(r),n=!0)},o(s){ke(r),n=!1},d(s){s&&u(l),r&&r.d(s)}}}function $l(t){let e,l="No more content.";return{c(){e=_("p"),e.textContent=l,this.h()},l(n){e=p(n,"P",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1i1hdg1"&&(e.textContent=l),this.h()},h(){a(e,"class","text-neutral-content")},m(n,r){x(n,e,r)},p:Ue,d(n){n&&u(e)}}}function Fl(t){let e,l="Load more",n,r;return{c(){e=_("button"),e.textContent=l,this.h()},l(s){e=p(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-dgbld1"&&(e.textContent=l),this.h()},h(){a(e,"class","btn btn-neutral btn-outline")},m(s,o){x(s,e,o),n||(r=de(e,"click",t[37]),n=!0)},p:Ue,d(s){s&&u(e),n=!1,r()}}}function Wt(t){let e,l;function n(o,c){return o[10]?Rl:zl}let r=n(t),s=r(t);return{c(){e=_("div"),l=_("span"),s.c(),this.h()},l(o){e=p(o,"DIV",{class:!0});var c=w(e);l=p(c,"SPAN",{class:!0});var h=w(l);s.l(h),h.forEach(u),c.forEach(u),this.h()},h(){a(l,"class","font-bold text-4xl"),a(e,"class","w-full h-full flex items-center justify-center")},m(o,c){x(o,e,c),i(e,l),s.m(l,null)},p(o,c){r===(r=n(o))&&s?s.p(o,c):(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},d(o){o&&u(e),s.d()}}}function zl(t){let e=t[7]("common.loading")+"",l;return{c(){l=se(e)},l(n){l=re(n,e)},m(n,r){x(n,l,r)},p(n,r){r[0]&128&&e!==(e=n[7]("common.loading")+"")&&_e(l,e)},d(n){n&&u(l)}}}function Rl(t){let e=t[7]("common.emptyList")+"",l;return{c(){l=se(e)},l(n){l=re(n,e)},m(n,r){x(n,l,r)},p(n,r){r[0]&128&&e!==(e=n[7]("common.emptyList")+"")&&_e(l,e)},d(n){n&&u(l)}}}function Zt(t){let e,l='<svg class="w-5 h-5 icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="#333333" d="M572.235 205.282v600.365a30.118 30.118 0 11-60.235 0V205.282L292.382 438.633a28.913 28.913 0 01-42.646 0 33.43 33.43 0 010-45.236l271.058-288.045a28.913 28.913 0 0142.647 0L834.5 393.397a33.43 33.43 0 010 45.176 28.913 28.913 0 01-42.647 0l-219.618-233.23z"></path></svg>',n,r;return{c(){e=_("button"),e.innerHTML=l,this.h()},l(s){e=p(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-y2nwai"&&(e.innerHTML=l),this.h()},h(){a(e,"class","fixed right-10 bottom-10 w-10 h-10 flex justify-center items-center rounded-full bg-slate-50")},m(s,o){x(s,e,o),n||(r=de(e,"click",Gl),n=!0)},p:Ue,d(s){s&&u(e),n=!1,r()}}}function qt(t){let e,l=t[50].name+"",n,r;return{c(){e=_("option"),n=se(l),this.h()},l(s){e=p(s,"OPTION",{});var o=w(e);n=re(o,l),o.forEach(u),this.h()},h(){e.__value=r=t[50].id,Ce(e,e.__value)},m(s,o){x(s,e,o),i(e,n)},p(s,o){o[0]&1048576&&l!==(l=s[50].name+"")&&_e(n,l),o[0]&1048576&&r!==(r=s[50].id)&&(e.__value=r,Ce(e,e.__value))},d(s){s&&u(e)}}}function Kt(t){let e,l=t[47].nickname+"",n,r;return{c(){e=_("option"),n=se(l),this.h()},l(s){e=p(s,"OPTION",{});var o=w(e);n=re(o,l),o.forEach(u),this.h()},h(){e.__value=r=t[47].nickname,Ce(e,e.__value)},m(s,o){x(s,e,o),i(e,n)},p(s,o){o[0]&524288&&l!==(l=s[47].nickname+"")&&_e(n,l),o[0]&524288&&r!==(r=s[47].nickname)&&(e.__value=r,Ce(e,e.__value))},d(s){s&&u(e)}}}function Yl(t){let e,l,n,r,s=t[7]("common.rootDir")+"",o,c,h,d,b,g,D,m,E,A,$,C,U,z="点击",J,V,I,Y,R,G='<span class="label-text">* 素材名称</span>',F,j,oe,ee,v,T='<span class="label-text">* 游戏项目</span>',k,y,H,S,M,f='<span class="label-text">* 制作人</span>',N,W,Q,te,ae,ve='<span class="label-text">标签(多个标签按照逗号分割)</span>',L,Z,ie,le,pe="上传",Ee,X,q="取消",ue,he,me,ne=De((t[0]||"").split("/")),ce=[];for(let O=0;O<ne.length;O+=1)ce[O]=Rt(zt(t,ne,O));let Ie=De(t[9].filter(t[32]).slice(0,t[12])),be=[];for(let O=0;O<Ie.length;O+=1)be[O]=Jt(Ft(t,Ie,O));const Ke=O=>ke(be[O],1,1,()=>{be[O]=null});function ze(O,fe){return O[9].length>O[12]?Fl:$l}let $e=ze(t),Ne=$e(t),ye=t[9].length===0&&Wt(t),Te=t[14]>=300&&Zt(),He=De(t[20]),Me=[];for(let O=0;O<He.length;O+=1)Me[O]=qt($t(t,He,O));let Ye=De(t[19]),Se=[];for(let O=0;O<Ye.length;O+=1)Se[O]=Kt(At(t,Ye,O));return{c(){e=_("div"),l=_("ul"),n=_("li"),r=_("button"),o=se(s),c=P();for(let O=0;O<ce.length;O+=1)ce[O].c();h=P(),d=_("input"),g=P(),D=_("div");for(let O=0;O<be.length;O+=1)be[O].c();m=P(),E=_("div"),Ne.c(),A=P(),ye&&ye.c(),$=P(),Te&&Te.c(),C=P(),U=_("div"),U.textContent=z,J=P(),V=_("dialog"),I=_("div"),Y=_("div"),R=_("div"),R.innerHTML=G,F=P(),j=_("input"),oe=P(),ee=_("div"),v=_("div"),v.innerHTML=T,k=P(),y=_("select");for(let O=0;O<Me.length;O+=1)Me[O].c();H=P(),S=_("div"),M=_("div"),M.innerHTML=f,N=P(),W=_("select");for(let O=0;O<Se.length;O+=1)Se[O].c();Q=P(),te=_("div"),ae=_("div"),ae.innerHTML=ve,L=P(),Z=_("input"),ie=P(),le=_("button"),le.textContent=pe,Ee=P(),X=_("button"),X.textContent=q,this.h()},l(O){e=p(O,"DIV",{class:!0});var fe=w(e);l=p(fe,"UL",{class:!0});var K=w(l);n=p(K,"LI",{});var Fe=w(n);r=p(Fe,"BUTTON",{});var kt=w(r);o=re(kt,s),kt.forEach(u),Fe.forEach(u),c=B(K);for(let Ve=0;Ve<ce.length;Ve+=1)ce[Ve].l(K);K.forEach(u),h=B(fe),d=p(fe,"INPUT",{type:!0,placeholder:!0,class:!0}),fe.forEach(u),g=B(O),D=p(O,"DIV",{class:!0});var yt=w(D);for(let Ve=0;Ve<be.length;Ve+=1)be[Ve].l(yt);yt.forEach(u),m=B(O),E=p(O,"DIV",{class:!0});var Tt=w(E);Ne.l(Tt),Tt.forEach(u),A=B(O),ye&&ye.l(O),$=B(O),Te&&Te.l(O),C=B(O),U=p(O,"DIV",{"data-svelte-h":!0}),ge(U)!=="svelte-1h4w71s"&&(U.textContent=z),J=B(O),V=p(O,"DIALOG",{class:!0});var Et=w(V);I=p(Et,"DIV",{class:!0,style:!0});var Re=w(I);Y=p(Re,"DIV",{class:!0});var ot=w(Y);R=p(ot,"DIV",{class:!0,"data-svelte-h":!0}),ge(R)!=="svelte-9nyo7s"&&(R.innerHTML=G),F=B(ot),j=p(ot,"INPUT",{type:!0,class:!0}),ot.forEach(u),oe=B(Re),ee=p(Re,"DIV",{class:!0});var at=w(ee);v=p(at,"DIV",{class:!0,"data-svelte-h":!0}),ge(v)!=="svelte-zhw92x"&&(v.innerHTML=T),k=B(at),y=p(at,"SELECT",{class:!0});var Dt=w(y);for(let Ve=0;Ve<Me.length;Ve+=1)Me[Ve].l(Dt);Dt.forEach(u),at.forEach(u),H=B(Re),S=p(Re,"DIV",{class:!0});var it=w(S);M=p(it,"DIV",{class:!0,"data-svelte-h":!0}),ge(M)!=="svelte-1neej33"&&(M.innerHTML=f),N=B(it),W=p(it,"SELECT",{class:!0});var Ct=w(W);for(let Ve=0;Ve<Se.length;Ve+=1)Se[Ve].l(Ct);Ct.forEach(u),it.forEach(u),Q=B(Re),te=p(Re,"DIV",{class:!0});var ct=w(te);ae=p(ct,"DIV",{class:!0,"data-svelte-h":!0}),ge(ae)!=="svelte-1vj4tn2"&&(ae.innerHTML=ve),L=B(ct),Z=p(ct,"INPUT",{type:!0,class:!0}),ct.forEach(u),ie=B(Re),le=p(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(le)!=="svelte-1wst5je"&&(le.textContent=pe),Ee=B(Re),X=p(Re,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(X)!=="svelte-l7bwyv"&&(X.textContent=q),Re.forEach(u),Et.forEach(u),this.h()},h(){a(l,"class","basis-3/4"),a(d,"type","text"),a(d,"placeholder",b=t[21]("searchInput.placeholder")),a(d,"class","input input-bordered w-full h-full rounded-none border-slate-600 text-sm basis-1/4"),a(e,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),a(D,"class","grid grid-cols-4 lg:grid-cols-6 gap-2"),a(E,"class","flex justify-center"),a(R,"class","label"),a(j,"type","text"),a(j,"class","input input-bordered w-full max-w-2xl"),a(Y,"class","form-control w-full max-w-2xl"),a(v,"class","label"),a(y,"class","select select-bordered max-w-xs"),t[16]===void 0&&pt(()=>t[40].call(y)),a(ee,"class","form-control w-full"),a(M,"class","label"),a(W,"class","select select-bordered max-w-xs"),t[17]===void 0&&pt(()=>t[41].call(W)),a(S,"class","form-control w-full"),a(ae,"class","label"),a(Z,"type","text"),a(Z,"class","input input-bordered w-full max-w-2xl"),a(te,"class","form-control w-full max-w-2xl"),a(le,"class","btn btn-secondary btn-outline w-36"),a(X,"class","btn btn-secondary btn-outline w-36"),a(I,"class","border-gray-300 border-2 px-5 py-5 w-1/2 space-y-4"),mt(I,"background-color","#353535"),a(V,"class","modal")},m(O,fe){x(O,e,fe),i(e,l),i(l,n),i(n,r),i(r,o),i(l,c);for(let K=0;K<ce.length;K+=1)ce[K]&&ce[K].m(l,null);i(e,h),i(e,d),Ce(d,t[6]),x(O,g,fe),x(O,D,fe);for(let K=0;K<be.length;K+=1)be[K]&&be[K].m(D,null);x(O,m,fe),x(O,E,fe),Ne.m(E,null),x(O,A,fe),ye&&ye.m(O,fe),x(O,$,fe),Te&&Te.m(O,fe),x(O,C,fe),x(O,U,fe),x(O,J,fe),x(O,V,fe),i(V,I),i(I,Y),i(Y,R),i(Y,F),i(Y,j),Ce(j,t[15]),i(I,oe),i(I,ee),i(ee,v),i(ee,k),i(ee,y);for(let K=0;K<Me.length;K+=1)Me[K]&&Me[K].m(y,null);et(y,t[16],!0),i(I,H),i(I,S),i(S,M),i(S,N),i(S,W);for(let K=0;K<Se.length;K+=1)Se[K]&&Se[K].m(W,null);et(W,t[17],!0),i(I,Q),i(I,te),i(te,ae),i(te,L),i(te,Z),Ce(Z,t[18]),i(I,ie),i(I,le),i(I,Ee),i(I,X),t[45](V),ue=!0,he||(me=[de(r,"click",t[29]),de(d,"input",t[31]),de(U,"click",t[38]),de(j,"input",t[39]),de(y,"change",t[40]),de(W,"change",t[41]),de(Z,"input",t[42]),de(le,"click",t[43]),de(X,"click",t[44])],he=!0)},p(O,fe){if((!ue||fe[0]&128)&&s!==(s=O[7]("common.rootDir")+"")&&_e(o,s),fe[0]&33554433){ne=De((O[0]||"").split("/"));let K;for(K=0;K<ne.length;K+=1){const Fe=zt(O,ne,K);ce[K]?ce[K].p(Fe,fe):(ce[K]=Rt(Fe),ce[K].c(),ce[K].m(l,null))}for(;K<ce.length;K+=1)ce[K].d(1);ce.length=ne.length}if((!ue||fe[0]&2097152&&b!==(b=O[21]("searchInput.placeholder")))&&a(d,"placeholder",b),fe[0]&64&&d.value!==O[6]&&Ce(d,O[6]),fe[0]&29373330){Ie=De(O[9].filter(O[32]).slice(0,O[12]));let K;for(K=0;K<Ie.length;K+=1){const Fe=Ft(O,Ie,K);be[K]?(be[K].p(Fe,fe),we(be[K],1)):(be[K]=Jt(Fe),be[K].c(),we(be[K],1),be[K].m(D,null))}for(nt(),K=Ie.length;K<be.length;K+=1)Ke(K);st()}if($e===($e=ze(O))&&Ne?Ne.p(O,fe):(Ne.d(1),Ne=$e(O),Ne&&(Ne.c(),Ne.m(E,null))),O[9].length===0?ye?ye.p(O,fe):(ye=Wt(O),ye.c(),ye.m($.parentNode,$)):ye&&(ye.d(1),ye=null),O[14]>=300?Te?Te.p(O,fe):(Te=Zt(),Te.c(),Te.m(C.parentNode,C)):Te&&(Te.d(1),Te=null),fe[0]&32768&&j.value!==O[15]&&Ce(j,O[15]),fe[0]&1048576){He=De(O[20]);let K;for(K=0;K<He.length;K+=1){const Fe=$t(O,He,K);Me[K]?Me[K].p(Fe,fe):(Me[K]=qt(Fe),Me[K].c(),Me[K].m(y,null))}for(;K<Me.length;K+=1)Me[K].d(1);Me.length=He.length}if(fe[0]&1114112&&et(y,O[16]),fe[0]&524288){Ye=De(O[19]);let K;for(K=0;K<Ye.length;K+=1){const Fe=At(O,Ye,K);Se[K]?Se[K].p(Fe,fe):(Se[K]=Kt(Fe),Se[K].c(),Se[K].m(W,null))}for(;K<Se.length;K+=1)Se[K].d(1);Se.length=Ye.length}fe[0]&655360&&et(W,O[17]),fe[0]&262144&&Z.value!==O[18]&&Ce(Z,O[18])},i(O){if(!ue){for(let fe=0;fe<Ie.length;fe+=1)we(be[fe]);ue=!0}},o(O){be=be.filter(Boolean);for(let fe=0;fe<be.length;fe+=1)ke(be[fe]);ue=!1},d(O){O&&(u(e),u(g),u(D),u(m),u(E),u(A),u($),u(C),u(U),u(J),u(V)),Ge(ce,O),Ge(be,O),Ne.d(),ye&&ye.d(O),Te&&Te.d(O),Ge(Me,O),Ge(Se,O),t[45](null),he=!1,We(me)}}}let _t="http://nuwa.datawing.qcwanwan.com";async function Gl(){window.scrollTo(0,0)}function Jl(t,e,l){let n,r;xe(t,rt,X=>l(7,r=X));let{comfyUrl:s}=e,{folderType:o}=e,{toast:c}=e,{folderPath:h}=e,d,b=[],g=!0,D,m=20,E="",A=new RegExp(""),$=0,C,U,z,J,V,I=[],Y=[];async function R(){l(10,g=!1),l(9,b=await wt(o,s,h)),l(10,g=!0)}async function G(){const q=await(await fetch(_t+"/nuwa/workshop/v3/api-open/game/options",{method:"POST",headers:{"Content-Type":"application/json"},body:"{}"})).json();q.status===200&&l(20,Y=q.data.list)}async function F(){const q=await(await fetch(_t+"/nuwa/workshop/v3/api-open/user/options",{method:"POST",headers:{"Content-Type":"application/json"},body:"{}"})).json();q.status===200&&l(19,I=q.data.list)}async function j(X){C=X,await F(),await G(),D.showModal()}async function oe(){if(!U){c.show(!1,"","素材名称不能为空！");return}if(!z){c.show(!1,"","游戏项目不能为空！");return}if(!J){c.show(!1,"","制作人不能为空！");return}const q=await(await fetch(s+C.url)).blob(),ue=new FormData;ue.append("name",U),ue.append("gameId",z),ue.append("nickname",J),ue.append("tags",V),ue.append("file",q);const me=await(await fetch(_t+"/nuwa/workshop/v3/api-open/ai/material/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:ue})).json();me.status===200&&console.log(me)}lt(async()=>{l(8,d=window.top.app),window.top.addEventListener("comfyuiBrowserShow",()=>{R()}),l(0,h=""),window.addEventListener("scroll",X=>{l(12,m=vl(m,b.length)),l(14,$=X.target.scrollingElement.scrollTop)})});async function ee(X){const q=await fetch(s+"/browser/collections",{method:"POST",body:JSON.stringify({filename:X.name,folder_path:X.folder_path,folder_type:o})});c.show(q.ok,n("fileList.Added to Saves"),n("fileList.Failed to add to Saves"))}async function v(X){if(!confirm(n("You want to delete this file?")+" "+X.name))return;const ue=await fetch(s+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:o,filename:X.name,folder_path:X.folder_path})});R(),c.show(ue.ok,n("Deleted the file")+X.name,n("Failed to delete the file"))}async function T(X){l(0,h=X.path)}async function k(X){if(X===-1){l(0,h="");return}l(0,h=h.split("/").slice(0,X+1).join("/"))}const y=()=>k(-1),H=X=>k(X);function S(){E=this.value,l(6,E)}const M=X=>A.test(X.name.toLowerCase()),f=async X=>await bl(X,d,c),N=X=>j(X),W=async X=>await ee(X),Q=async X=>await v(X),te=()=>l(12,m+=10),ae=async()=>{await F(),await G(),D.showModal()};function ve(){U=this.value,l(15,U)}function L(){z=vt(this),l(16,z),l(20,Y)}function Z(){J=vt(this),l(17,J),l(19,I)}function ie(){V=this.value,l(18,V)}const le=()=>oe(),pe=()=>D.close();function Ee(X){Xe[X?"unshift":"push"](()=>{D=X,l(11,D)})}return t.$$set=X=>{"comfyUrl"in X&&l(26,s=X.comfyUrl),"folderType"in X&&l(27,o=X.folderType),"toast"in X&&l(1,c=X.toast),"folderPath"in X&&l(0,h=X.folderPath)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&h!=null&&R(),t.$$.dirty[0]&64)try{l(13,A=new RegExp(E.toLowerCase()))}catch{l(13,A=new RegExp(""))}t.$$.dirty[0]&128&&l(21,n=function(X){return r("filesList."+X)})},[h,c,G,F,j,oe,E,r,d,b,g,D,m,A,$,U,z,J,V,I,Y,n,ee,v,T,k,s,o,R,y,H,S,M,f,N,W,Q,te,ae,ve,L,Z,ie,le,pe,Ee]}class kl extends Ze{constructor(e){super(),qe(this,e,Jl,Yl,Je,{comfyUrl:26,folderType:27,toast:1,folderPath:0,refresh:28,loadGameOptions:2,loadUserOptions:3,showUploadModal:4,uploadFile:5},null,[-1,-1])}get refresh(){return this.$$.ctx[28]}get loadGameOptions(){return this.$$.ctx[2]}get loadUserOptions(){return this.$$.ctx[3]}get showUploadModal(){return this.$$.ctx[4]}get uploadFile(){return this.$$.ctx[5]}}function Wl(t){let e,l,n,r;e=new kl({props:{folderType:"outputs",comfyUrl:t[0],toast:t[1]}});let s={};return n=new ht({props:s}),t[2](n),{c(){je(e.$$.fragment),l=P(),je(n.$$.fragment)},l(o){Pe(e.$$.fragment,o),l=B(o),Pe(n.$$.fragment,o)},m(o,c){Be(e,o,c),x(o,l,c),Be(n,o,c),r=!0},p(o,[c]){const h={};c&1&&(h.comfyUrl=o[0]),c&2&&(h.toast=o[1]),e.$set(h);const d={};n.$set(d)},i(o){r||(we(e.$$.fragment,o),we(n.$$.fragment,o),r=!0)},o(o){ke(e.$$.fragment,o),ke(n.$$.fragment,o),r=!1},d(o){o&&u(l),Ae(e,o),t[2](null),Ae(n,o)}}}function Zl(t,e,l){let{comfyUrl:n}=e,r;function s(o){Xe[o?"unshift":"push"](()=>{r=o,l(1,r)})}return t.$$set=o=>{"comfyUrl"in o&&l(0,n=o.comfyUrl)},[n,r,s]}class ql extends Ze{constructor(e){super(),qe(this,e,Zl,Wl,Je,{comfyUrl:0})}}function Xt(t,e,l){const n=t.slice();return n[34]=e[l],n}function Qt(t,e,l){const n=t.slice();return n[37]=e[l],n[39]=l,n}function xt(t){let e,l=t[11]("btn.save")+"",n,r,s;return{c(){e=_("button"),n=se(l),this.h()},l(o){e=p(o,"BUTTON",{class:!0});var c=w(e);n=re(c,l),c.forEach(u),this.h()},h(){a(e,"class","btn btn-outline btn-accent")},m(o,c){x(o,e,c),i(e,n),r||(s=de(e,"click",t[13]),r=!0)},p(o,c){c[0]&2048&&l!==(l=o[11]("btn.save")+"")&&_e(n,l)},d(o){o&&u(e),r=!1,s()}}}function el(t){let e,l,n=t[37]+"",r,s,o;function c(){return t[22](t[39])}return{c(){e=_("li"),l=_("button"),r=se(n)},l(h){e=p(h,"LI",{});var d=w(e);l=p(d,"BUTTON",{});var b=w(l);r=re(b,n),b.forEach(u),d.forEach(u)},m(h,d){x(h,e,d),i(e,l),i(l,r),s||(o=de(l,"click",c),s=!0)},p(h,d){t=h,d[0]&1&&n!==(n=t[37]+"")&&_e(r,n)},d(h){h&&u(e),s=!1,o()}}}function tl(t){let e,l=t[2]("common.btn.load")+"",n,r,s;function o(){return t[26](t[34])}return{c(){e=_("button"),n=se(l),this.h()},l(c){e=p(c,"BUTTON",{class:!0});var h=w(e);n=re(h,l),h.forEach(u),this.h()},h(){a(e,"class","btn btn-link btn-sm p-0 no-underline text-accent")},m(c,h){x(c,e,h),i(e,n),r||(s=de(e,"click",o),r=!0)},p(c,h){t=c,h[0]&4&&l!==(l=t[2]("common.btn.load")+"")&&_e(n,l)},d(c){c&&u(e),r=!1,s()}}}function ll(t){let e,l,n,r,s,o,c,h,d=t[34].formattedDatetime+"",b,g,D=t[34].formattedSize+"",m,E,A,$,C,U,z,J,V=t[2]("common.btn.delete")+"",I,Y,R,G,F,j,oe,ee,v,T;l=new gl({props:{file:t[34],styleClass:"w-16 sm:w-28",onClickDir:t[17]}});function k(...M){return t[25](t[34],...M)}let y=t[3]&&t[34].type!="dir"&&tl(t);function H(){return t[27](t[34])}function S(...M){return t[28](t[34],...M)}return{c(){e=_("li"),je(l.$$.fragment),n=P(),r=_("div"),s=_("input"),c=P(),h=_("p"),b=se(d),g=se(" | "),m=se(D),E=P(),A=_("div"),y&&y.c(),$=P(),C=_("button"),U=Le("svg"),z=Le("path"),J=P(),I=se(V),Y=P(),R=_("div"),G=_("textarea"),oe=P(),this.h()},l(M){e=p(M,"LI",{class:!0});var f=w(e);Pe(l.$$.fragment,f),n=B(f),r=p(f,"DIV",{class:!0});var N=w(r);s=p(N,"INPUT",{type:!0,class:!0}),c=B(N),h=p(N,"P",{class:!0});var W=w(h);b=re(W,d),g=re(W," | "),m=re(W,D),W.forEach(u),E=B(N),A=p(N,"DIV",{class:!0});var Q=w(A);y&&y.l(Q),$=B(Q),C=p(Q,"BUTTON",{class:!0});var te=w(C);U=Oe(te,"svg",{class:!0,viewBox:!0,fill:!0,xmlns:!0});var ae=w(U);z=Oe(ae,"path",{d:!0,fill:!0}),w(z).forEach(u),ae.forEach(u),J=B(te),I=re(te,V),te.forEach(u),Q.forEach(u),N.forEach(u),Y=B(f),R=p(f,"DIV",{});var ve=w(R);G=p(ve,"TEXTAREA",{name:!0,placeholder:!0,class:!0}),w(G).forEach(u),ve.forEach(u),oe=B(f),f.forEach(u),this.h()},h(){a(s,"type","text"),a(s,"class","input-bordered font-bold w-full bg-base-100"),s.value=o=t[34].name,a(h,"class","text-gray-500 text-xs hidden sm:block"),a(z,"d","M16 2v4h6v2h-2v14H4V8H2V6h6V2h8zm-2 2h-4v2h4V4zm0 4H6v12h12V8h-4zm-5 2h2v8H9v-8zm6 0h-2v8h2v-8z"),a(z,"fill","#f77"),a(U,"class","w-3 h-3"),a(U,"viewBox","0 0 24 24"),a(U,"fill","none"),a(U,"xmlns","http://www.w3.org/2000/svg"),a(C,"class","btn btn-link btn-sm p-0 no-underline text-error ml-52"),a(A,"class","bottom-0 absolute"),a(r,"class","space-y-2 w-96 relative"),a(G,"name","notes"),a(G,"placeholder",F=t[11]("collection.memoPlaceholder")),a(G,"class","resize-none textarea hidden md:block md:w-72 max-w-72 h-14 sm:h-24"),G.value=j=t[34].notes,a(e,"class","flex h-16 sm:h-28 border-0 space-x-4 p-2 bg-info-content")},m(M,f){x(M,e,f),Be(l,e,null),i(e,n),i(e,r),i(r,s),i(r,c),i(r,h),i(h,b),i(h,g),i(h,m),i(r,E),i(r,A),y&&y.m(A,null),i(A,$),i(A,C),i(C,U),i(U,z),i(C,J),i(C,I),i(e,Y),i(e,R),i(R,G),i(e,oe),ee=!0,v||(T=[de(s,"blur",k),de(C,"click",H),de(G,"blur",S)],v=!0)},p(M,f){t=M;const N={};f[0]&1168&&(N.file=t[34]),l.$set(N),(!ee||f[0]&1168&&o!==(o=t[34].name)&&s.value!==o)&&(s.value=o),(!ee||f[0]&1168)&&d!==(d=t[34].formattedDatetime+"")&&_e(b,d),(!ee||f[0]&1168)&&D!==(D=t[34].formattedSize+"")&&_e(m,D),t[3]&&t[34].type!="dir"?y?y.p(t,f):(y=tl(t),y.c(),y.m(A,$)):y&&(y.d(1),y=null),(!ee||f[0]&4)&&V!==(V=t[2]("common.btn.delete")+"")&&_e(I,V),(!ee||f[0]&2048&&F!==(F=t[11]("collection.memoPlaceholder")))&&a(G,"placeholder",F),(!ee||f[0]&1168&&j!==(j=t[34].notes))&&(G.value=j)},i(M){ee||(we(l.$$.fragment,M),ee=!0)},o(M){ke(l.$$.fragment,M),ee=!1},d(M){M&&u(e),Ae(l),y&&y.d(),v=!1,We(T)}}}function Kl(t){let e,l="No more content.";return{c(){e=_("p"),e.textContent=l,this.h()},l(n){e=p(n,"P",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1i1hdg1"&&(e.textContent=l),this.h()},h(){a(e,"class","text-neutral-content")},m(n,r){x(n,e,r)},p:Ue,d(n){n&&u(e)}}}function Xl(t){let e,l="Load more",n,r;return{c(){e=_("button"),e.textContent=l,this.h()},l(s){e=p(s,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-dgbld1"&&(e.textContent=l),this.h()},h(){a(e,"class","btn btn-neutral btn-outline")},m(s,o){x(s,e,o),n||(r=de(e,"click",t[29]),n=!0)},p:Ue,d(s){s&&u(e),n=!1,r()}}}function nl(t){let e,l;function n(o,c){return o[9]?xl:Ql}let r=n(t),s=r(t);return{c(){e=_("div"),l=_("span"),s.c(),this.h()},l(o){e=p(o,"DIV",{class:!0});var c=w(e);l=p(c,"SPAN",{class:!0});var h=w(l);s.l(h),h.forEach(u),c.forEach(u),this.h()},h(){a(l,"class","font-bold text-4xl"),a(e,"class","w-full h-full flex items-center justify-center")},m(o,c){x(o,e,c),i(e,l),s.m(l,null)},p(o,c){r===(r=n(o))&&s?s.p(o,c):(s.d(1),s=r(o),s&&(s.c(),s.m(l,null)))},d(o){o&&u(e),s.d()}}}function Ql(t){let e=t[2]("common.rootDir")+"",l;return{c(){l=se(e)},l(n){l=re(n,e)},m(n,r){x(n,l,r)},p(n,r){r[0]&4&&e!==(e=n[2]("common.rootDir")+"")&&_e(l,e)},d(n){n&&u(l)}}}function xl(t){let e=t[2]("common.emptyList")+"",l;return{c(){l=se(e)},l(n){l=re(n,e)},m(n,r){x(n,l,r)},p(n,r){r[0]&4&&e!==(e=n[2]("common.emptyList")+"")&&_e(l,e)},d(n){n&&u(l)}}}function en(t){let e,l,n='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"></path></svg>',r,s,o,c,h,d,b=t[11]("btn.sync")+"",g,D,m,E,A,$,C=t[2]("common.rootDir")+"",U,z,J,V,I,Y,R,G,F,j,oe,ee,v,T,k,y=t[6]!=t[5]?.git_repo&&xt(t),H=De((t[0]||"").split("/")),S=[];for(let L=0;L<H.length;L+=1)S[L]=el(Qt(t,H,L));let M=De(t[4].filter(t[24]).slice(0,t[7])),f=[];for(let L=0;L<M.length;L+=1)f[L]=ll(Xt(t,M,L));const N=L=>ke(f[L],1,1,()=>{f[L]=null});function W(L,Z){return L[4].length>L[7]?Xl:Kl}let Q=W(t),te=Q(t),ae=t[4].length===0&&nl(t),ve={};return ee=new ht({props:ve}),t[30](ee),{c(){e=_("div"),l=_("a"),l.innerHTML=n,r=P(),s=_("input"),c=P(),y&&y.c(),h=P(),d=_("button"),g=se(b),D=P(),m=_("div"),E=_("ul"),A=_("li"),$=_("button"),U=se(C),z=P();for(let L=0;L<S.length;L+=1)S[L].c();J=P(),V=_("input"),Y=P(),R=_("ul");for(let L=0;L<f.length;L+=1)f[L].c();G=P(),F=_("div"),te.c(),j=P(),ae&&ae.c(),oe=P(),je(ee.$$.fragment),this.h()},l(L){e=p(L,"DIV",{class:!0});var Z=w(e);l=p(Z,"A",{class:!0,target:!0,href:!0,"data-svelte-h":!0}),ge(l)!=="svelte-13ejcpg"&&(l.innerHTML=n),r=B(Z),s=p(Z,"INPUT",{type:!0,placeholder:!0,class:!0}),c=B(Z),y&&y.l(Z),h=B(Z),d=p(Z,"BUTTON",{class:!0});var ie=w(d);g=re(ie,b),ie.forEach(u),Z.forEach(u),D=B(L),m=p(L,"DIV",{class:!0});var le=w(m);E=p(le,"UL",{class:!0});var pe=w(E);A=p(pe,"LI",{});var Ee=w(A);$=p(Ee,"BUTTON",{});var X=w($);U=re(X,C),X.forEach(u),Ee.forEach(u),z=B(pe);for(let he=0;he<S.length;he+=1)S[he].l(pe);pe.forEach(u),J=B(le),V=p(le,"INPUT",{type:!0,placeholder:!0,class:!0}),le.forEach(u),Y=B(L),R=p(L,"UL",{class:!0});var q=w(R);for(let he=0;he<f.length;he+=1)f[he].l(q);q.forEach(u),G=B(L),F=p(L,"DIV",{class:!0});var ue=w(F);te.l(ue),ue.forEach(u),j=B(L),ae&&ae.l(L),oe=B(L),Pe(ee.$$.fragment,L),this.h()},h(){a(l,"class","btn pr-2"),a(l,"target","_blank"),a(l,"href","https://github.com/talesofai/comfyui-browser/wiki/How-to-use-Sync-in-the-Saves-tab"),a(s,"type","text"),a(s,"placeholder",o=t[11]("syncInput.placeholder")),a(s,"class","input input-bordered w-full max-w-lg"),a(d,"class","btn btn-outline btn-accent"),a(e,"class","flex border-b border-base-content pb-2"),a(E,"class","basis-2/3"),a(V,"type","text"),a(V,"placeholder",I=t[11]("searchInput.placeholder")),a(V,"class","input input-bordered border-slate-600 w-full h-full rounded-none text-sm basis-1/3"),a(m,"class","max-w-full text-sm breadcrumbs flex flex-row ml-4"),a(R,"class","space-y-2"),a(F,"class","flex justify-center")},m(L,Z){x(L,e,Z),i(e,l),i(e,r),i(e,s),Ce(s,t[6]),i(e,c),y&&y.m(e,null),i(e,h),i(e,d),i(d,g),x(L,D,Z),x(L,m,Z),i(m,E),i(E,A),i(A,$),i($,U),i(E,z);for(let ie=0;ie<S.length;ie+=1)S[ie]&&S[ie].m(E,null);i(m,J),i(m,V),Ce(V,t[1]),x(L,Y,Z),x(L,R,Z);for(let ie=0;ie<f.length;ie+=1)f[ie]&&f[ie].m(R,null);x(L,G,Z),x(L,F,Z),te.m(F,null),x(L,j,Z),ae&&ae.m(L,Z),x(L,oe,Z),Be(ee,L,Z),v=!0,T||(k=[de(s,"input",t[20]),de(d,"click",t[12]),de($,"click",t[21]),de(V,"input",t[23])],T=!0)},p(L,Z){if((!v||Z[0]&2048&&o!==(o=L[11]("syncInput.placeholder")))&&a(s,"placeholder",o),Z[0]&64&&s.value!==L[6]&&Ce(s,L[6]),L[6]!=L[5]?.git_repo?y?y.p(L,Z):(y=xt(L),y.c(),y.m(e,h)):y&&(y.d(1),y=null),(!v||Z[0]&2048)&&b!==(b=L[11]("btn.sync")+"")&&_e(g,b),(!v||Z[0]&4)&&C!==(C=L[2]("common.rootDir")+"")&&_e(U,C),Z[0]&262145){H=De((L[0]||"").split("/"));let le;for(le=0;le<H.length;le+=1){const pe=Qt(L,H,le);S[le]?S[le].p(pe,Z):(S[le]=el(pe),S[le].c(),S[le].m(E,null))}for(;le<S.length;le+=1)S[le].d(1);S.length=H.length}if((!v||Z[0]&2048&&I!==(I=L[11]("searchInput.placeholder")))&&a(V,"placeholder",I),Z[0]&2&&V.value!==L[1]&&Ce(V,L[1]),Z[0]&249244){M=De(L[4].filter(L[24]).slice(0,L[7]));let le;for(le=0;le<M.length;le+=1){const pe=Xt(L,M,le);f[le]?(f[le].p(pe,Z),we(f[le],1)):(f[le]=ll(pe),f[le].c(),we(f[le],1),f[le].m(R,null))}for(nt(),le=M.length;le<f.length;le+=1)N(le);st()}Q===(Q=W(L))&&te?te.p(L,Z):(te.d(1),te=Q(L),te&&(te.c(),te.m(F,null))),L[4].length===0?ae?ae.p(L,Z):(ae=nl(L),ae.c(),ae.m(oe.parentNode,oe)):ae&&(ae.d(1),ae=null);const ie={};ee.$set(ie)},i(L){if(!v){for(let Z=0;Z<M.length;Z+=1)we(f[Z]);we(ee.$$.fragment,L),v=!0}},o(L){f=f.filter(Boolean);for(let Z=0;Z<f.length;Z+=1)ke(f[Z]);ke(ee.$$.fragment,L),v=!1},d(L){L&&(u(e),u(D),u(m),u(Y),u(R),u(G),u(F),u(j),u(oe)),y&&y.d(),Ge(S,L),Ge(f,L),te.d(),ae&&ae.d(L),t[30](null),Ae(ee,L),T=!1,We(k)}}}const ut="collections";function tn(t){var e=/^[a-zA-Z0-9-_|\u4E00-\u9FFF]+(\.[a-zA-Z0-9]+)?$/;return e.test(t)}function ln(t,e,l){let n,r;xe(t,rt,f=>l(2,r=f));let{comfyUrl:s}=e,o,c=[],h={},d="",b=20,g,D,m=!1,E="",A=new RegExp("");async function $(){l(9,m=!0),l(4,c=await wt(ut,s,D)),l(9,m=!0)}lt(async()=>{l(3,o=window.top.app),window.top.addEventListener("comfyuiBrowserShow",()=>{$()}),l(0,D=""),l(5,h=await C()||{}),l(6,d=h?.git_repo),window.addEventListener("scroll",()=>{l(7,b=vl(b,c.length))})});async function C(){return await(await fetch(s+"/browser/config")).json()}async function U(f){const N=f.target;N.disabled=!0,N.innerHTML=n("btn.syncing");const W=await fetch(s+"/browser/collections/sync",{method:"POST"});g.show(W.ok,n("toast.synced"),n("toast.syncFailed")),N.disabled=!1,N.innerHTML=n("btn.sync"),l(0,D=""),l(4,c=await wt(ut,s))}async function z(){const f=await fetch(s+"/browser/config",{method:"PUT",body:JSON.stringify({git_repo:d})});C(),g.show(f.ok,n("toast.configUpdated"),n("toast.configUpdatedFailed"))}async function J(f){if(!confirm(n("toast.deleteConfirm")+f.name))return;const W=await fetch(s+"/browser/files",{method:"DELETE",body:JSON.stringify({folder_type:ut,filename:f.name,folder_path:f.folder_path})});$(),g.show(W.ok,n("toast.deleteSuccess")+f.name,n("toast.deleteFailed"))}async function V(f,N){const W=await fetch(s+"/browser/files",{method:"PUT",body:JSON.stringify({folder_type:ut,folder_path:f.folder_path,filename:f.name,new_data:N})});return $(),W.ok}async function I(f,N){const W=f.target.value;if(!tn(W)){g.show(!1,"",n("toast.Invalid filename"));return}if(W===N.name)return;const Q=await V(N,{filename:W,notes:N.notes||"",folder_path:N.folder_path});g.show(Q,n("toast.updated"),n("toast.updatedFailed"))}async function Y(f,N){const W=f.target.value;if(W==N.notes)return;const Q=await V(N,{filename:N.name,notes:W,folder_path:N.folder_path});g.show(Q,n("toast.updated"),n("toast.updatedFailed"))}async function R(f){l(0,D=f.path)}async function G(f){if(f===-1){l(0,D="");return}l(0,D=D.split("/").slice(0,f+1).join("/"))}function F(){d=this.value,l(6,d)}const j=()=>G(-1),oe=f=>G(f);function ee(){E=this.value,l(1,E)}const v=f=>A.test(f.name.toLowerCase())||A.test(f.notes.toLowerCase()),T=(f,N)=>I(N,f),k=async f=>await bl(f,o,g),y=async f=>await J(f),H=(f,N)=>Y(N,f),S=()=>l(7,b+=10);function M(f){Xe[f?"unshift":"push"](()=>{g=f,l(8,g)})}return t.$$set=f=>{"comfyUrl"in f&&l(19,s=f.comfyUrl)},t.$$.update=()=>{if(t.$$.dirty[0]&1&&D!=null&&$(),t.$$.dirty[0]&2)try{l(10,A=new RegExp(E.toLowerCase()))}catch{l(10,A=new RegExp(""))}t.$$.dirty[0]&4&&l(11,n=function(f){return r("collectionsTab."+f)})},[D,E,r,o,c,h,d,b,g,m,A,n,U,z,J,I,Y,R,G,s,F,j,oe,ee,v,T,k,y,H,S,M]}class nn extends Ze{constructor(e){super(),qe(this,e,ln,en,Je,{comfyUrl:19},null,[-1,-1])}}function sl(t,e,l){const n=t.slice();return n[28]=e[l],n}function rl(t,e,l){const n=t.slice();return n[31]=e[l],n}function sn(t){let e,l='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6 text-accent"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 15a4.5 4.5 0 0 0 4.5 4.5H18a3.75 3.75 0 0 0 1.332-7.257 3 3 0 0 0-3.758-3.848 5.25 5.25 0 0 0-10.233 2.33A4.502 4.502 0 0 0 2.25 15Z"></path></svg>';return{c(){e=_("div"),e.innerHTML=l,this.h()},l(n){e=p(n,"DIV",{class:!0,"data-svelte-h":!0}),ge(e)!=="svelte-1mxeilz"&&(e.innerHTML=l),this.h()},h(){a(e,"class","h-14 px-0.5 flex items-center justify-center")},m(n,r){x(n,e,r)},p:Ue,d(n){n&&u(e)}}}function rn(t){let e,l,n,r;return{c(){e=_("a"),l=Le("svg"),n=Le("path"),this.h()},l(s){e=p(s,"A",{class:!0,href:!0,target:!0});var o=w(e);l=Oe(o,"svg",{class:!0,xmlns:!0,x:!0,y:!0,width:!0,height:!0,viewBox:!0});var c=w(l);n=Oe(c,"path",{d:!0}),w(n).forEach(u),c.forEach(u),o.forEach(u),this.h()},h(){a(n,"d","M15,3C8.373,3,3,8.373,3,15c0,5.623,3.872,10.328,9.092,11.63C12.036,26.468,12,26.28,12,26.047v-2.051 c-0.487,0-1.303,0-1.508,0c-0.821,0-1.551-0.353-1.905-1.009c-0.393-0.729-0.461-1.844-1.435-2.526 c-0.289-0.227-0.069-0.486,0.264-0.451c0.615,0.174,1.125,0.596,1.605,1.222c0.478,0.627,0.703,0.769,1.596,0.769 c0.433,0,1.081-0.025,1.691-0.121c0.328-0.833,0.895-1.6,1.588-1.962c-3.996-0.411-5.903-2.399-5.903-5.098 c0-1.162,0.495-2.286,1.336-3.233C9.053,10.647,8.706,8.73,9.435,8c1.798,0,2.885,1.166,3.146,1.481C13.477,9.174,14.461,9,15.495,9 c1.036,0,2.024,0.174,2.922,0.483C18.675,9.17,19.763,8,21.565,8c0.732,0.731,0.381,2.656,0.102,3.594 c0.836,0.945,1.328,2.066,1.328,3.226c0,2.697-1.904,4.684-5.894,5.097C18.199,20.49,19,22.1,19,23.313v2.734 c0,0.104-0.023,0.179-0.035,0.268C23.641,24.676,27,20.236,27,15C27,8.373,21.627,3,15,3z"),a(l,"class","w-6 h-6 fill-accent"),a(l,"xmlns","http://www.w3.org/2000/svg"),a(l,"x","0px"),a(l,"y","0px"),a(l,"width","100"),a(l,"height","100"),a(l,"viewBox","0 0 30 30"),a(e,"class","h-14 px-0.5 flex items-center justify-center"),a(e,"href",r=t[31].homepage),a(e,"target","_blank")},m(s,o){x(s,e,o),i(e,l),i(l,n)},p(s,o){o[0]&4&&r!==(r=s[31].homepage)&&a(e,"href",r)},d(s){s&&u(e)}}}function ol(t){let e,l,n,r,s=t[31].name+"",o,c,h,d,b,g,D,m,E,A;function $(V,I){return V[31].homepage?rn:sn}let C=$(t),U=C(t);function z(){return t[18](t[31])}function J(){return t[19](t[31])}return{c(){e=_("li"),U.c(),l=P(),n=_("button"),r=_("p"),o=se(s),h=P(),d=_("button"),b=Le("svg"),g=Le("path"),m=P(),this.h()},l(V){e=p(V,"LI",{class:!0});var I=w(e);U.l(I),l=B(I),n=p(I,"BUTTON",{class:!0});var Y=w(n);r=p(Y,"P",{class:!0});var R=w(r);o=re(R,s),R.forEach(u),Y.forEach(u),h=B(I),d=p(I,"BUTTON",{class:!0});var G=w(d);b=Oe(G,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var F=w(b);g=Oe(F,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(g).forEach(u),F.forEach(u),G.forEach(u),m=B(I),I.forEach(u),this.h()},h(){a(r,"class","w-40 truncate whitespace-normal"),a(n,"class",c="pl-2 h-14 line-clamp-2 overflow-hidden "+(t[31].name==t[7].split("/")[0]?"active":"")),a(g,"stroke-linecap","round"),a(g,"stroke-linejoin","round"),a(g,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"),a(b,"xmlns","http://www.w3.org/2000/svg"),a(b,"fill","none"),a(b,"viewBox","0 0 24 24"),a(b,"stroke-width","1.5"),a(b,"stroke","currentColor"),a(b,"class",D=(t[10]==t[31]?"text-accent":"")+" w-6 h-6"),a(d,"class","h-14 right-0 fixed flex items-center justify-center"),a(e,"class","h-14")},m(V,I){x(V,e,I),U.m(e,null),i(e,l),i(e,n),i(n,r),i(r,o),i(e,h),i(e,d),i(d,b),i(b,g),i(e,m),E||(A=[de(n,"click",z),de(d,"click",J)],E=!0)},p(V,I){t=V,C===(C=$(t))&&U?U.p(t,I):(U.d(1),U=C(t),U&&(U.c(),U.m(e,l))),I[0]&4&&s!==(s=t[31].name+"")&&_e(o,s),I[0]&132&&c!==(c="pl-2 h-14 line-clamp-2 overflow-hidden "+(t[31].name==t[7].split("/")[0]?"active":""))&&a(n,"class",c),I[0]&1028&&D!==(D=(t[10]==t[31]?"text-accent":"")+" w-6 h-6")&&a(b,"class",D)},d(V){V&&u(e),U.d(),E=!1,We(A)}}}function al(t){let e,l,n=t[1]("common.loading")+"",r;return{c(){e=_("div"),l=_("span"),r=se(n),this.h()},l(s){e=p(s,"DIV",{class:!0});var o=w(e);l=p(o,"SPAN",{class:!0});var c=w(l);r=re(c,n),c.forEach(u),o.forEach(u),this.h()},h(){a(l,"class","font-bold text-4xl"),a(e,"class","w-full h-full flex items-center justify-center")},m(s,o){x(s,e,o),i(e,l),i(l,r)},p(s,o){o[0]&2&&n!==(n=s[1]("common.loading")+"")&&_e(r,n)},d(s){s&&u(e)}}}function il(t){let e,l,n,r,s,o,c,h,d=t[28].author+"",b,g,D=t[28].title+"",m,E,A,$,C,U,z,J,V,I,Y=t[28].description+"",R,G,F,j,oe=(t[6]===t[28].url?t[11]("Subscribing..."):t[11]("Subscribe"))+"",ee,v,T,k,y;function H(){return t[23](t[28])}return{c(){e=_("li"),l=_("img"),s=P(),o=_("div"),c=_("a"),h=_("p"),b=se(d),g=se("/"),m=se(D),A=P(),$=_("a"),C=_("img"),J=P(),V=_("div"),I=_("p"),R=se(Y),G=P(),F=_("div"),j=_("button"),ee=se(oe),T=P(),this.h()},l(S){e=p(S,"LI",{class:!0});var M=w(e);l=p(M,"IMG",{src:!0,alt:!0}),s=B(M),o=p(M,"DIV",{class:!0});var f=w(o);c=p(f,"A",{class:!0,href:!0,target:!0});var N=w(c);h=p(N,"P",{class:!0});var W=w(h);b=re(W,d),g=re(W,"/"),m=re(W,D),W.forEach(u),N.forEach(u),A=B(f),$=p(f,"A",{href:!0,target:!0});var Q=w($);C=p(Q,"IMG",{src:!0,alt:!0}),Q.forEach(u),f.forEach(u),J=B(M),V=p(M,"DIV",{class:!0});var te=w(V);I=p(te,"P",{});var ae=w(I);R=re(ae,Y),ae.forEach(u),te.forEach(u),G=B(M),F=p(M,"DIV",{class:!0});var ve=w(F);j=p(ve,"BUTTON",{class:!0});var L=w(j);ee=re(L,oe),L.forEach(u),ve.forEach(u),T=B(M),M.forEach(u),this.h()},h(){Qe(l.src,n=`https://github.com/${t[28].author}.png`)||a(l,"src",n),a(l,"alt",r=t[28].author),a(h,"class","line-clamp-2"),a(c,"class","link link-warning text-lg no-underline"),a(c,"href",E=t[28].url),a(c,"target","_blank"),Qe(C.src,U=`https://img.shields.io/github/stars${new URL(t[28].url).pathname}?style=flat-square`)||a(C,"src",U),a(C,"alt","stars"),a($,"href",z=t[28].url),a($,"target","_blank"),a(o,"class","w-80"),a(V,"class","w-72 grow overflow-auto"),a(j,"class","btn btn-outline btn-primary no-underline text-accent"),j.disabled=v=t[6].length>0,a(F,"class","flex items-center justify-center"),a(e,"class","flex flex-nowrap space-x-2 h-20 border-b border-b-base-content")},m(S,M){x(S,e,M),i(e,l),i(e,s),i(e,o),i(o,c),i(c,h),i(h,b),i(h,g),i(h,m),i(o,A),i(o,$),i($,C),i(e,J),i(e,V),i(V,I),i(I,R),i(e,G),i(e,F),i(F,j),i(j,ee),i(e,T),k||(y=de(j,"click",H),k=!0)},p(S,M){t=S,M[0]&256&&!Qe(l.src,n=`https://github.com/${t[28].author}.png`)&&a(l,"src",n),M[0]&256&&r!==(r=t[28].author)&&a(l,"alt",r),M[0]&256&&d!==(d=t[28].author+"")&&_e(b,d),M[0]&256&&D!==(D=t[28].title+"")&&_e(m,D),M[0]&256&&E!==(E=t[28].url)&&a(c,"href",E),M[0]&256&&!Qe(C.src,U=`https://img.shields.io/github/stars${new URL(t[28].url).pathname}?style=flat-square`)&&a(C,"src",U),M[0]&256&&z!==(z=t[28].url)&&a($,"href",z),M[0]&256&&Y!==(Y=t[28].description+"")&&_e(R,Y),M[0]&2368&&oe!==(oe=(t[6]===t[28].url?t[11]("Subscribing..."):t[11]("Subscribe"))+"")&&_e(ee,oe),M[0]&64&&v!==(v=t[6].length>0)&&(j.disabled=v)},d(S){S&&u(e),k=!1,y()}}}function on(t){let e,l,n,r,s,o,c,h,d,b,g,D,m,E,A=t[11]("Add new source")+"",$,C,U,z,J,V,I,Y,R,G,F,j=(t[6]===t[5]&&t[5]?t[11]("Subscribing..."):t[11]("Subscribe"))+"",oe,ee,v,T,k,y,H,S,M=`You could open
      <a class="text-accent" target="_blank" href="https://github.com/talesofai/comfyui-browser/edit/main/data/sources.json">a pull request</a>
      or submit
      <a class="text-accent" target="_blank" href="https://github.com/talesofai/comfyui-browser/issues/new?assignees=tzwm&amp;labels=workflow-repo&amp;projects=&amp;template=new-workflow-repository.md&amp;title=New+workflow+repo%3A">an issue</a>
      to add your workflow repository here.<br/>
      Thank you to everyone who contributes to the open community!`,f,N,W="<button>close</button>",Q,te,ae;function ve(q){t[16](q)}let L={folderType:"sources",comfyUrl:t[0],toast:t[3]};t[7]!==void 0&&(L.folderPath=t[7]),s=new kl({props:L}),Xe.push(()=>_l(s,"folderPath",ve)),t[17](s);let Z=De(t[2]),ie=[];for(let q=0;q<Z.length;q+=1)ie[q]=ol(rl(t,Z,q));let le={};z=new ht({props:le}),t[20](z);let pe=t[8].length===0&&al(t),Ee=De(t[8]),X=[];for(let q=0;q<Ee.length;q+=1)X[q]=il(sl(t,Ee,q));return{c(){e=_("div"),l=_("input"),n=P(),r=_("div"),je(s.$$.fragment),c=P(),h=_("div"),d=_("ul"),b=_("li"),g=_("button"),D=Le("svg"),m=Le("path"),E=P(),$=se(A),C=P();for(let q=0;q<ie.length;q+=1)ie[q].c();U=P(),je(z.$$.fragment),J=P(),V=_("dialog"),I=_("div"),Y=_("div"),R=_("input"),G=P(),F=_("button"),oe=se(j),v=P(),T=_("div"),pe&&pe.c(),k=P(),y=_("ul");for(let q=0;q<X.length;q+=1)X[q].c();H=P(),S=_("p"),S.innerHTML=M,f=P(),N=_("form"),N.innerHTML=W,this.h()},l(q){e=p(q,"DIV",{class:!0});var ue=w(e);l=p(ue,"INPUT",{type:!0,class:!0}),n=B(ue),r=p(ue,"DIV",{class:!0});var he=w(r);Pe(s.$$.fragment,he),he.forEach(u),c=B(ue),h=p(ue,"DIV",{class:!0});var me=w(h);d=p(me,"UL",{class:!0});var ne=w(d);b=p(ne,"LI",{class:!0});var ce=w(b);g=p(ce,"BUTTON",{class:!0});var Ie=w(g);D=Oe(Ie,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,"data-slot":!0,class:!0});var be=w(D);m=Oe(be,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),w(m).forEach(u),be.forEach(u),E=B(Ie),$=re(Ie,A),Ie.forEach(u),ce.forEach(u),C=B(ne);for(let He=0;He<ie.length;He+=1)ie[He].l(ne);ne.forEach(u),me.forEach(u),ue.forEach(u),U=B(q),Pe(z.$$.fragment,q),J=B(q),V=p(q,"DIALOG",{class:!0});var Ke=w(V);I=p(Ke,"DIV",{class:!0});var ze=w(I);Y=p(ze,"DIV",{class:!0});var $e=w(Y);R=p($e,"INPUT",{type:!0,placeholder:!0,class:!0}),G=B($e),F=p($e,"BUTTON",{class:!0});var Ne=w(F);oe=re(Ne,j),Ne.forEach(u),$e.forEach(u),v=B(ze),T=p(ze,"DIV",{});var ye=w(T);pe&&pe.l(ye),k=B(ye),y=p(ye,"UL",{class:!0});var Te=w(y);for(let He=0;He<X.length;He+=1)X[He].l(Te);Te.forEach(u),ye.forEach(u),H=B(ze),S=p(ze,"P",{class:!0,"data-svelte-h":!0}),ge(S)!=="svelte-eul32s"&&(S.innerHTML=M),ze.forEach(u),f=B(Ke),N=p(Ke,"FORM",{method:!0,class:!0,"data-svelte-h":!0}),ge(N)!=="svelte-povsts"&&(N.innerHTML=W),Ke.forEach(u),this.h()},h(){a(l,"type","checkbox"),a(l,"class","drawer-toggle"),a(r,"class","drawer-content flex flex-col pl-2"),a(m,"stroke-linecap","round"),a(m,"stroke-linejoin","round"),a(m,"d","M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),a(D,"xmlns","http://www.w3.org/2000/svg"),a(D,"fill","none"),a(D,"viewBox","0 0 24 24"),a(D,"stroke-width","1.5"),a(D,"stroke","currentColor"),a(D,"data-slot","icon"),a(D,"class","w-6 h-6"),a(g,"class","pl-2 btn-outline btn-accent"),a(b,"class","h-10"),a(d,"class","menu bg-base-200 w-56 p-0 [&_li>*]:rounded-none"),a(h,"class","drawer-side border-r border-base-content pr-2"),a(e,"class","drawer md:drawer-open"),a(R,"type","text"),a(R,"placeholder","https://github.com/comfyanonymous/ComfyUI_examples"),a(R,"class","grow input input-bordered"),a(F,"class","btn btn-outline btn-primary"),F.disabled=ee=t[6].length>0||!t[5],a(Y,"class","mb-2 flex space-x-2"),a(y,"class","space-y-1"),a(S,"class","mt-1 text-xs text-gray-500"),a(I,"class","modal-box w-5/6 max-w-5xl"),a(N,"method","dialog"),a(N,"class","modal-backdrop"),a(V,"class","modal")},m(q,ue){x(q,e,ue),i(e,l),i(e,n),i(e,r),Be(s,r,null),i(e,c),i(e,h),i(h,d),i(d,b),i(b,g),i(g,D),i(D,m),i(g,E),i(g,$),i(d,C);for(let he=0;he<ie.length;he+=1)ie[he]&&ie[he].m(d,null);x(q,U,ue),Be(z,q,ue),x(q,J,ue),x(q,V,ue),i(V,I),i(I,Y),i(Y,R),Ce(R,t[5]),i(Y,G),i(Y,F),i(F,oe),i(I,v),i(I,T),pe&&pe.m(T,null),i(T,k),i(T,y);for(let he=0;he<X.length;he+=1)X[he]&&X[he].m(y,null);i(I,H),i(I,S),i(V,f),i(V,N),t[24](V),Q=!0,te||(ae=[de(g,"click",t[14]),de(R,"input",t[21]),de(F,"click",t[22])],te=!0)},p(q,ue){const he={};if(ue[0]&1&&(he.comfyUrl=q[0]),ue[0]&8&&(he.toast=q[3]),!o&&ue[0]&128&&(o=!0,he.folderPath=q[7],dl(()=>o=!1)),s.$set(he),(!Q||ue[0]&2048)&&A!==(A=q[11]("Add new source")+"")&&_e($,A),ue[0]&13444){Z=De(q[2]);let ne;for(ne=0;ne<Z.length;ne+=1){const ce=rl(q,Z,ne);ie[ne]?ie[ne].p(ce,ue):(ie[ne]=ol(ce),ie[ne].c(),ie[ne].m(d,null))}for(;ne<ie.length;ne+=1)ie[ne].d(1);ie.length=Z.length}const me={};if(z.$set(me),ue[0]&32&&R.value!==q[5]&&Ce(R,q[5]),(!Q||ue[0]&2144)&&j!==(j=(q[6]===q[5]&&q[5]?q[11]("Subscribing..."):q[11]("Subscribe"))+"")&&_e(oe,j),(!Q||ue[0]&96&&ee!==(ee=q[6].length>0||!q[5]))&&(F.disabled=ee),q[8].length===0?pe?pe.p(q,ue):(pe=al(q),pe.c(),pe.m(T,k)):pe&&(pe.d(1),pe=null),ue[0]&35136){Ee=De(q[8]);let ne;for(ne=0;ne<Ee.length;ne+=1){const ce=sl(q,Ee,ne);X[ne]?X[ne].p(ce,ue):(X[ne]=il(ce),X[ne].c(),X[ne].m(y,null))}for(;ne<X.length;ne+=1)X[ne].d(1);X.length=Ee.length}},i(q){Q||(we(s.$$.fragment,q),we(z.$$.fragment,q),Q=!0)},o(q){ke(s.$$.fragment,q),ke(z.$$.fragment,q),Q=!1},d(q){q&&(u(e),u(U),u(J),u(V)),t[17](null),Ae(s),Ge(ie,q),t[20](null),Ae(z,q),pe&&pe.d(),Ge(X,q),t[24](null),te=!1,We(ae)}}}function an(t,e,l){let n,r;xe(t,rt,v=>l(1,r=v));let{comfyUrl:s}=e,o=[],c,h,d,b="",g="",D=[],m,E;async function A(){const T=await(await fetch(s+"/browser/sources")).json();l(2,o=T.sources.map(k=>(k.homepage="",k.url.startsWith("https://")&&(k.homepage=k.url,k.homepage.endsWith(".git")&&(k.homepage=k.homepage.slice(0,-4))),k)))}lt(async()=>{A(),J()});function $(v){l(7,g=v.name)}async function C(v){l(10,E=v);const T=await fetch(s+`/browser/sources/sync/${v.name}`,{method:"POST"});l(10,E=null),T.ok&&(A(),m.refresh()),c.show(T.ok,"Synced "+[v.author,v.name].join("/"),"Failed to sync this source. Please check the ComfyUI server.")}function U(){h.showModal()}async function z(v){if(!v){c.show(!1,"","missing Git URL");return}l(6,b=v);const T=await fetch(s+"/browser/sources",{method:"POST",body:JSON.stringify({repo_url:v})});l(6,b=""),T.ok&&(A(),m.refresh()),c.show(T.ok,"Added a new source","Failed to add a new source. Please check the ComfyUI server."),h.close()}async function J(){const T=await(await fetch(s+"/browser/sources/all")).json();l(8,D=T.sources)}function V(v){g=v,l(7,g)}function I(v){Xe[v?"unshift":"push"](()=>{m=v,l(9,m)})}const Y=v=>$(v),R=v=>C(v);function G(v){Xe[v?"unshift":"push"](()=>{c=v,l(3,c)})}function F(){d=this.value,l(5,d)}const j=()=>z(d),oe=v=>z(v.url);function ee(v){Xe[v?"unshift":"push"](()=>{h=v,l(4,h)})}return t.$$set=v=>{"comfyUrl"in v&&l(0,s=v.comfyUrl)},t.$$.update=()=>{t.$$.dirty[0]&2&&l(11,n=function(v){return r("sourcesTab."+v)})},[s,r,o,c,h,d,b,g,D,m,E,n,$,C,U,z,V,I,Y,R,G,F,j,oe,ee]}class cn extends Ze{constructor(e){super(),qe(this,e,an,on,Je,{comfyUrl:0},null,[-1,-1])}}function cl(t,e,l){const n=t.slice();return n[7]=e[l],n}function un(t){let e,l,n=t[7].result+"",r;return{c(){e=_("p"),l=se("Result: "),r=se(n)},l(s){e=p(s,"P",{});var o=w(e);l=re(o,"Result: "),r=re(o,n),o.forEach(u)},m(s,o){x(s,e,o),i(e,l),i(e,r)},p(s,o){o&2&&n!==(n=s[7].result+"")&&_e(r,n)},d(s){s&&u(e)}}}function fn(t){let e,l,n=t[7].formattedDownloadedSize+"",r,s,o=t[7].formattedTotalSize+"",c,h,d,b=t[7].percentStr+"",g,D,m,E,A;return{c(){e=_("div"),l=_("span"),r=se(n),s=se("/"),c=se(o),h=P(),d=_("span"),g=se(b),D=P(),m=_("progress"),this.h()},l($){e=p($,"DIV",{});var C=w(e);l=p(C,"SPAN",{});var U=w(l);r=re(U,n),s=re(U,"/"),c=re(U,o),U.forEach(u),h=B(C),d=p(C,"SPAN",{});var z=w(d);g=re(z,b),z.forEach(u),D=B(C),m=p(C,"PROGRESS",{class:!0,max:!0});var J=w(m);J.forEach(u),C.forEach(u),this.h()},h(){a(m,"class","progress progress-primary"),m.value=E=t[7].downloaded_size,a(m,"max",A=t[7].total_size)},m($,C){x($,e,C),i(e,l),i(l,r),i(l,s),i(l,c),i(e,h),i(e,d),i(d,g),i(e,D),i(e,m)},p($,C){C&2&&n!==(n=$[7].formattedDownloadedSize+"")&&_e(r,n),C&2&&o!==(o=$[7].formattedTotalSize+"")&&_e(c,o),C&2&&b!==(b=$[7].percentStr+"")&&_e(g,b),C&2&&E!==(E=$[7].downloaded_size)&&(m.value=E),C&2&&A!==(A=$[7].total_size)&&a(m,"max",A)},d($){$&&u(e)}}}function ul(t){let e,l,n=(t[7].filename?t[7].filename:t[7].uuid)+"",r,s,o,c,h,d=t[7].formattedCreatedAt+"",b,g,D,m,E=t[7].formattedUpdatedAt+"",A,$,C,U,z=t[7].download_url+"",J,V,I,Y,R=t[7].save_in+"",G,F,j;function oe(T,k){return T[7].total_size!==0?fn:un}let ee=oe(t),v=ee(t);return{c(){e=_("li"),l=_("p"),r=se(n),s=P(),o=_("p"),c=_("span"),h=se("Created at: "),b=se(d),g=P(),D=_("span"),m=se("Updated at: "),A=se(E),$=P(),C=_("p"),U=se("URL: "),J=se(z),V=P(),I=_("p"),Y=se("Save in: "),G=se(R),F=P(),v.c(),j=P(),this.h()},l(T){e=p(T,"LI",{class:!0});var k=w(e);l=p(k,"P",{class:!0});var y=w(l);r=re(y,n),y.forEach(u),s=B(k),o=p(k,"P",{class:!0});var H=w(o);c=p(H,"SPAN",{});var S=w(c);h=re(S,"Created at: "),b=re(S,d),S.forEach(u),g=B(H),D=p(H,"SPAN",{});var M=w(D);m=re(M,"Updated at: "),A=re(M,E),M.forEach(u),H.forEach(u),$=B(k),C=p(k,"P",{class:!0});var f=w(C);U=re(f,"URL: "),J=re(f,z),f.forEach(u),V=B(k),I=p(k,"P",{class:!0});var N=w(I);Y=re(N,"Save in: "),G=re(N,R),N.forEach(u),F=B(k),v.l(k),j=B(k),k.forEach(u),this.h()},h(){a(l,"class","font-bold text-lg"),a(o,"class","text-gray-500 text-xs"),a(C,"class","text-gray-500 text-xs"),a(I,"class","text-gray-500 text-xs"),a(e,"class","bg-info-content")},m(T,k){x(T,e,k),i(e,l),i(l,r),i(e,s),i(e,o),i(o,c),i(c,h),i(c,b),i(o,g),i(o,D),i(D,m),i(D,A),i(e,$),i(e,C),i(C,U),i(C,J),i(e,V),i(e,I),i(I,Y),i(I,G),i(e,F),v.m(e,null),i(e,j)},p(T,k){k&2&&n!==(n=(T[7].filename?T[7].filename:T[7].uuid)+"")&&_e(r,n),k&2&&d!==(d=T[7].formattedCreatedAt+"")&&_e(b,d),k&2&&E!==(E=T[7].formattedUpdatedAt+"")&&_e(A,E),k&2&&z!==(z=T[7].download_url+"")&&_e(J,z),k&2&&R!==(R=T[7].save_in+"")&&_e(G,R),ee===(ee=oe(T))&&v?v.p(T,k):(v.d(1),v=ee(T),v&&(v.c(),v.m(e,j)))},d(T){T&&u(e),v.d()}}}function hn(t){let e,l,n=t[2]("common.btn.refresh")+"",r,s,o,c,h=t[2]("downloadHistory.Auto Refresh")+"",d,b,g,D,m,E,A,$=De(t[1]),C=[];for(let U=0;U<$.length;U+=1)C[U]=ul(cl(t,$,U));return{c(){e=_("div"),l=_("button"),r=se(n),s=P(),o=_("div"),c=_("span"),d=se(h),b=P(),g=_("input"),D=P(),m=_("ul");for(let U=0;U<C.length;U+=1)C[U].c();this.h()},l(U){e=p(U,"DIV",{class:!0});var z=w(e);l=p(z,"BUTTON",{class:!0});var J=w(l);r=re(J,n),J.forEach(u),s=B(z),o=p(z,"DIV",{class:!0});var V=w(o);c=p(V,"SPAN",{class:!0});var I=w(c);d=re(I,h),I.forEach(u),b=B(V),g=p(V,"INPUT",{type:!0,class:!0}),V.forEach(u),z.forEach(u),D=B(U),m=p(U,"UL",{class:!0});var Y=w(m);for(let R=0;R<C.length;R+=1)C[R].l(Y);Y.forEach(u),this.h()},h(){a(l,"class","btn btn-accent btn-outline"),a(c,"class","label-text"),a(g,"type","checkbox"),a(g,"class","checkbox checkbox-secondary"),a(o,"class","flex items-center"),a(e,"class","flex flex-row justify-between"),a(m,"class","space-y-2")},m(U,z){x(U,e,z),i(e,l),i(l,r),i(e,s),i(e,o),i(o,c),i(c,d),i(o,b),i(o,g),g.checked=t[0],x(U,D,z),x(U,m,z);for(let J=0;J<C.length;J+=1)C[J]&&C[J].m(m,null);E||(A=[de(l,"click",t[3]),de(g,"change",t[6])],E=!0)},p(U,[z]){if(z&4&&n!==(n=U[2]("common.btn.refresh")+"")&&_e(r,n),z&4&&h!==(h=U[2]("downloadHistory.Auto Refresh")+"")&&_e(d,h),z&1&&(g.checked=U[0]),z&2){$=De(U[1]);let J;for(J=0;J<$.length;J+=1){const V=cl(U,$,J);C[J]?C[J].p(V,z):(C[J]=ul(V),C[J].c(),C[J].m(m,null))}for(;J<C.length;J+=1)C[J].d(1);C.length=$.length}},i:Ue,o:Ue,d(U){U&&(u(e),u(D),u(m)),Ge(C,U),E=!1,We(A)}}}function dn(t,e,l){let n;xe(t,rt,b=>l(2,n=b));let{comfyUrl:r}=e,s=[],o=!0,c;async function h(){const g=await(await fetch(r+"/browser/downloads")).json();let D=[];g.download_logs.forEach(m=>{let E=m;const A="YYYY-MM-DD HH:mm:ss";E.formattedCreatedAt=ft.unix(m.created_at).format(A),E.formattedUpdatedAt=ft.unix(m.updated_at).format(A),E.percentStr=`${Math.floor(m.downloaded_size/m.total_size*100)}%`,E.formattedDownloadedSize=gt(m.downloaded_size),E.formattedTotalSize=gt(m.total_size),D.push(E)}),l(1,s=D)}lt(async()=>{h()}),yl(()=>{c&&clearInterval(c)});function d(){o=this.checked,l(0,o)}return t.$$set=b=>{"comfyUrl"in b&&l(4,r=b.comfyUrl)},t.$$.update=()=>{t.$$.dirty&33&&(o?l(5,c=setInterval(h,1e3)):c&&clearInterval(c))},[o,s,n,h,r,c,d]}class _n extends Ze{constructor(e){super(),qe(this,e,dn,hn,Je,{comfyUrl:4})}}function fl(t,e,l){const n=t.slice();return n[14]=e[l],n}function hl(t){let e,l=t[14].text+"",n;return{c(){e=_("option"),n=se(l),this.h()},l(r){e=p(r,"OPTION",{});var s=w(e);n=re(s,l),s.forEach(u),this.h()},h(){e.__value=t[14].value,Ce(e,e.__value)},m(r,s){x(r,e,s),i(e,n)},p:Ue,d(r){r&&u(e)}}}function pn(t){let e,l,n,r='<span class="label-text">* Download URL</span>',s,o,c,h,d,b='<span class="label-text">Filename(leave this blank if you want to auto detect this)</span>',g,D,m,E,A,$='<span class="label-text">* Select the modal type</span>',C,U,z,J,V,I,Y="Overwrite the exist file?",R,G,F,j,oe="Download",ee,v,T,k,y,H=De(t[5]),S=[];for(let f=0;f<H.length;f+=1)S[f]=hl(fl(t,H,f));let M={};return v=new ht({props:M}),t[13](v),{c(){e=_("div"),l=_("div"),n=_("div"),n.innerHTML=r,s=P(),o=_("input"),c=P(),h=_("div"),d=_("div"),d.innerHTML=b,g=P(),D=_("input"),m=P(),E=_("div"),A=_("div"),A.innerHTML=$,C=P(),U=_("select");for(let f=0;f<S.length;f+=1)S[f].c();z=P(),J=_("div"),V=_("label"),I=_("span"),I.textContent=Y,R=P(),G=_("input"),F=P(),j=_("button"),j.textContent=oe,ee=P(),je(v.$$.fragment),this.h()},l(f){e=p(f,"DIV",{class:!0});var N=w(e);l=p(N,"DIV",{class:!0});var W=w(l);n=p(W,"DIV",{class:!0,"data-svelte-h":!0}),ge(n)!=="svelte-4z13xw"&&(n.innerHTML=r),s=B(W),o=p(W,"INPUT",{type:!0,placeholder:!0,class:!0}),W.forEach(u),c=B(N),h=p(N,"DIV",{class:!0});var Q=w(h);d=p(Q,"DIV",{class:!0,"data-svelte-h":!0}),ge(d)!=="svelte-jdi0v3"&&(d.innerHTML=b),g=B(Q),D=p(Q,"INPUT",{type:!0,class:!0}),Q.forEach(u),m=B(N),E=p(N,"DIV",{class:!0});var te=w(E);A=p(te,"DIV",{class:!0,"data-svelte-h":!0}),ge(A)!=="svelte-6i7s0t"&&(A.innerHTML=$),C=B(te),U=p(te,"SELECT",{class:!0});var ae=w(U);for(let Z=0;Z<S.length;Z+=1)S[Z].l(ae);ae.forEach(u),te.forEach(u),z=B(N),J=p(N,"DIV",{class:!0});var ve=w(J);V=p(ve,"LABEL",{class:!0});var L=w(V);I=p(L,"SPAN",{class:!0,"data-svelte-h":!0}),ge(I)!=="svelte-16nwqv9"&&(I.textContent=Y),R=B(L),G=p(L,"INPUT",{type:!0,class:!0}),L.forEach(u),ve.forEach(u),F=B(N),j=p(N,"BUTTON",{class:!0,"data-svelte-h":!0}),ge(j)!=="svelte-cc59z2"&&(j.textContent=oe),N.forEach(u),ee=B(f),Pe(v.$$.fragment,f),this.h()},h(){a(n,"class","label"),a(o,"type","text"),a(o,"placeholder","https://civitai.com/api/download/models/35516"),a(o,"class","input input-bordered w-full max-w-2xl"),a(l,"class","form-control w-full max-w-2xl"),a(d,"class","label"),a(D,"type","text"),a(D,"class","input input-bordered w-full max-w-2xl"),a(h,"class","form-control w-full max-w-2xl"),a(A,"class","label"),a(U,"class","select select-bordered max-w-xs"),t[2]===void 0&&pt(()=>t[11].call(U)),a(E,"class","form-control w-full"),a(I,"class","label-text"),a(G,"type","checkbox"),a(G,"class","checkbox checkbox-secondary"),a(V,"class","cursor-pointer label max-w-xs"),a(J,"class","form-control w-full"),a(j,"class","btn btn-secondary btn-outline"),a(e,"class","space-y-4")},m(f,N){x(f,e,N),i(e,l),i(l,n),i(l,s),i(l,o),Ce(o,t[1]),i(e,c),i(e,h),i(h,d),i(h,g),i(h,D),Ce(D,t[3]),i(e,m),i(e,E),i(E,A),i(E,C),i(E,U);for(let W=0;W<S.length;W+=1)S[W]&&S[W].m(U,null);et(U,t[2],!0),i(e,z),i(e,J),i(J,V),i(V,I),i(V,R),i(V,G),G.checked=t[4],i(e,F),i(e,j),x(f,ee,N),Be(v,f,N),T=!0,k||(y=[de(o,"input",t[9]),de(D,"input",t[10]),de(U,"change",t[11]),de(G,"change",t[12]),de(j,"click",t[6])],k=!0)},p(f,[N]){if(N&2&&o.value!==f[1]&&Ce(o,f[1]),N&8&&D.value!==f[3]&&Ce(D,f[3]),N&32){H=De(f[5]);let Q;for(Q=0;Q<H.length;Q+=1){const te=fl(f,H,Q);S[Q]?S[Q].p(te,N):(S[Q]=hl(te),S[Q].c(),S[Q].m(U,null))}for(;Q<S.length;Q+=1)S[Q].d(1);S.length=H.length}N&36&&et(U,f[2]),N&16&&(G.checked=f[4]);const W={};v.$set(W)},i(f){T||(we(v.$$.fragment,f),T=!0)},o(f){ke(v.$$.fragment,f),T=!1},d(f){f&&(u(e),u(ee)),Ge(S,f),t[13](null),Ae(v,f),k=!1,We(y)}}}function mn(t,e,l){let{comfyUrl:n}=e,{afterStartingDownload:r}=e;const s=[{text:"Checkpoint",value:"checkpoints"},{text:"LoRA",value:"loras"},{text:"VAE",value:"vae"},{text:"Embedding",value:"embeddings"},{text:"ControlNet",value:"controlnet"}];let o,c="",h=s[0].value,d="",b=!1;async function g(){if(!c){o.show(!1,"","Invalid download URL");return}const C=await fetch(n+"/browser/downloads",{method:"POST",body:JSON.stringify({download_url:c,save_in:h,filename:d,overwrite:b})});o.show(C.ok,"Download started","Failed"),r&&r()}function D(){c=this.value,l(1,c)}function m(){d=this.value,l(3,d)}function E(){h=vt(this),l(2,h),l(5,s)}function A(){b=this.checked,l(4,b)}function $(C){Xe[C?"unshift":"push"](()=>{o=C,l(0,o)})}return t.$$set=C=>{"comfyUrl"in C&&l(7,n=C.comfyUrl),"afterStartingDownload"in C&&l(8,r=C.afterStartingDownload)},[o,c,h,d,b,s,g,n,r,D,m,E,A,$]}class vn extends Ze{constructor(e){super(),qe(this,e,mn,pn,Je,{comfyUrl:7,afterStartingDownload:8})}}function bn(t){let e,l;return e=new vn({props:{comfyUrl:t[0],afterStartingDownload:t[4]}}),{c(){je(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){Be(e,n,r),l=!0},p(n,r){const s={};r&1&&(s.comfyUrl=n[0]),e.$set(s)},i(n){l||(we(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function wn(t){let e,l;return e=new _n({props:{comfyUrl:t[0]}}),{c(){je(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){Be(e,n,r),l=!0},p(n,r){const s={};r&1&&(s.comfyUrl=n[0]),e.$set(s)},i(n){l||(we(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function gn(t){let e,l,n,r,s,o,c,h,d,b,g,D,m,E,A,$,C,U,z,J,V;const I=[wn,bn],Y=[];function R(G,F){return G[1]==="downloadHistory"?0:1}return s=R(t),o=Y[s]=I[s](t),{c(){e=_("div"),l=_("input"),n=P(),r=_("div"),o.c(),c=P(),h=_("div"),d=_("ul"),b=_("li"),g=_("button"),D=se("Download new model"),E=P(),A=_("li"),$=_("button"),C=se("Download History"),this.h()},l(G){e=p(G,"DIV",{class:!0});var F=w(e);l=p(F,"INPUT",{type:!0,class:!0}),n=B(F),r=p(F,"DIV",{class:!0});var j=w(r);o.l(j),j.forEach(u),c=B(F),h=p(F,"DIV",{class:!0});var oe=w(h);d=p(oe,"UL",{class:!0});var ee=w(d);b=p(ee,"LI",{class:!0});var v=w(b);g=p(v,"BUTTON",{class:!0});var T=w(g);D=re(T,"Download new model"),T.forEach(u),v.forEach(u),E=B(ee),A=p(ee,"LI",{class:!0});var k=w(A);$=p(k,"BUTTON",{class:!0});var y=w($);C=re(y,"Download History"),y.forEach(u),k.forEach(u),ee.forEach(u),oe.forEach(u),F.forEach(u),this.h()},h(){a(l,"type","checkbox"),a(l,"class","drawer-toggle"),a(r,"class","drawer-content flex flex-col pl-2"),a(g,"class",m=t[2]("downloadNewModel")+" pl-2 btn-outline btn-accent"),a(b,"class","h-10"),a($,"class",U=t[2]("downloadHistory")+" pl-2 btn-outline btn-accent"),a(A,"class","h-10"),a(d,"class","menu bg-base-200 w-56 p-0 [&_li>*]:rounded-none"),a(h,"class","drawer-side border-r border-base-content pr-2"),a(e,"class","drawer md:drawer-open")},m(G,F){x(G,e,F),i(e,l),i(e,n),i(e,r),Y[s].m(r,null),i(e,c),i(e,h),i(h,d),i(d,b),i(b,g),i(g,D),i(d,E),i(d,A),i(A,$),i($,C),z=!0,J||(V=[de(g,"click",t[5]),de($,"click",t[6])],J=!0)},p(G,[F]){let j=s;s=R(G),s===j?Y[s].p(G,F):(nt(),ke(Y[j],1,1,()=>{Y[j]=null}),st(),o=Y[s],o?o.p(G,F):(o=Y[s]=I[s](G),o.c()),we(o,1),o.m(r,null)),(!z||F&4&&m!==(m=G[2]("downloadNewModel")+" pl-2 btn-outline btn-accent"))&&a(g,"class",m),(!z||F&4&&U!==(U=G[2]("downloadHistory")+" pl-2 btn-outline btn-accent"))&&a($,"class",U)},i(G){z||(we(o),z=!0)},o(G){ke(o),z=!1},d(G){G&&u(e),Y[s].d(),J=!1,We(V)}}}function kn(t,e,l){let n,{comfyUrl:r}=e,s="downloadNewModel";async function o(b){l(1,s=b)}const c=()=>o("downloadHistory"),h=()=>o("downloadNewModel"),d=()=>o("downloadHistory");return t.$$set=b=>{"comfyUrl"in b&&l(0,r=b.comfyUrl)},t.$$.update=()=>{t.$$.dirty&2&&l(2,n=function(b){return b===s?"active":""})},[r,s,n,o,c,h,d]}class yn extends Ze{constructor(e){super(),qe(this,e,kn,gn,Je,{comfyUrl:0})}}function Tn(t){let e,l;return e=new ql({props:{comfyUrl:t[1]}}),{c(){je(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){Be(e,n,r),l=!0},p:Ue,i(n){l||(we(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function En(t){let e,l;return e=new yn({props:{comfyUrl:t[1]}}),{c(){je(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){Be(e,n,r),l=!0},p:Ue,i(n){l||(we(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function Dn(t){let e,l;return e=new cn({props:{comfyUrl:t[1]}}),{c(){je(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){Be(e,n,r),l=!0},p:Ue,i(n){l||(we(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function Cn(t){let e,l;return e=new nn({props:{comfyUrl:t[1]}}),{c(){je(e.$$.fragment)},l(n){Pe(e.$$.fragment,n)},m(n,r){Be(e,n,r),l=!0},p:Ue,i(n){l||(we(e.$$.fragment,n),l=!0)},o(n){ke(e.$$.fragment,n),l=!1},d(n){Ae(e,n)}}}function Mn(t){let e,l,n,r,s,o,c;function h(m){t[3](m)}let d={};t[0]!==void 0&&(d.activeTab=t[0]),e=new Nl({props:d}),Xe.push(()=>_l(e,"activeTab",h));const b=[Cn,Dn,En,Tn],g=[];function D(m,E){return m[0]==="collections"?0:m[0]==="sources"?1:m[0]==="models"?2:3}return r=D(t),s=g[r]=b[r](t),{c(){je(e.$$.fragment),n=P(),s.c(),o=tt()},l(m){Pe(e.$$.fragment,m),n=B(m),s.l(m),o=tt()},m(m,E){Be(e,m,E),x(m,n,E),g[r].m(m,E),x(m,o,E),c=!0},p(m,[E]){const A={};!l&&E&1&&(l=!0,A.activeTab=m[0],dl(()=>l=!1)),e.$set(A);let $=r;r=D(m),r===$?g[r].p(m,E):(nt(),ke(g[$],1,1,()=>{g[$]=null}),st(),s=g[r],s?s.p(m,E):(s=g[r]=b[r](m),s.c()),we(s,1),s.m(o.parentNode,o))},i(m){c||(we(e.$$.fragment,m),we(s),c=!0)},o(m){ke(e.$$.fragment,m),ke(s),c=!1},d(m){m&&(u(n),u(o)),Ae(e,m),g[r].d(m)}}}function Sn(t,e,l){let{data:n}=e;const{comfyUrl:r}=n;let s="outputs";lt(()=>{const c=wl();c.lastTab&&l(0,s=c.lastTab)});function o(c){s=c,l(0,s)}return t.$$set=c=>{"data"in c&&l(2,n=c.data)},[s,r,n,o]}class Hn extends Ze{constructor(e){super(),qe(this,e,Sn,Mn,Je,{data:2})}}export{Hn as component};
